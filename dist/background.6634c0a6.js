(()=>{"use strict";let e,o,t,s,n={},r=[],a="",i="",c="";const l=!1,g="defaultSearchEngines.json",d="https://lens.google.com/uploadbyurl?url=",u="https://www.google.com/searchbyimage?sbisrc=1&safe=off&image_url=",f="iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAG2ElEQVRYhe2Wa1CTVxrH31o/7ezM7kxndndmv6wjs4aEJCCiOx20sOPYdms7uhBaUbou5Y4JBIGogFxiR7BeqmWgSiARCAlvyA2oEMAABbkZVC6CBAkGMCGBo+jY2W5H/feDwhgToLS7s1/2mXm+vc/5/97/c55zDkX9P9YYQcna3/rwtbsCUusEvIKWM9vS9GIfgZbPOlTzrr+I/s1/S3edpL7/7Mmqb83Z5e3PDL1jsDucIITg3swsdmVqwBXqwUnSPWMn65pZfHUoj0e/+R9R5on17wmLWqzZsnbsSKOxI10No8kMQggIIbg1NgWOgAZXqH+ZOnAFNP4qUt1hRkm3/wJprKtsvlXXdsP8PPtyO1KKW3Cp3gR2XAU6BybQNzyJY2XtCE6n8XexHtxkHbhCHfyTlBgen8bktB1XukeeH71klFAU1q1NGnijsWdkoMJwE4GpKohKjIg8fQU+8XJwkjQ4UdmJwDQ1uEIdAoQ1CExXg82nwU6QY3h8GoqWAXQPWWCdmcWUzYHG3tHhNUFovh1uIITgaGkbdmVoMDFlh3NuHrsytC96Lah5xXI9OAI1QsS14Il1SLxgQEpxC8Ym7y+1iRACTftQ008SlzbcPDg3P79UuLiQc24e+YoucARqF/FFoD05Wkjq+3HH4iq8mHPz85A1XP9sVev7RyefvF58Y9SKkDwdgtNpcJI07gDJWuw8qoLDOedRfDFvjt77bsVWyA03Ml8vMprMCExVgStQuVm/mOxD1bBM2yFvHkCQSI2LtSb0DU/CMm13g6gw3MxeFqCt3zzz6sdD41Pg8mmPoi4AfBqn6W6klxiRXtKKwMNK7DyiQvjJOlQbB10A2vvNNo/iF02mX9lmnc8JIbA7nDDfsyH4iObFXK8CsPOoBuNW25JIU98YdB23Uay/jsaeOy4AdocTNN36azeAauNwiN3hxLGydgSmqhBRUO+x326ZpML125PL9r170IJRywwIITgubUdjzx2UNfQfcANQto0UXL89CU6iAjvSVODwVeAka1cFiD1vWHHjTdkcOKXsAiEEIxMzOFHZiYDEqjA3gKyK3mOWaTuumsxIu2R8ueFWt/9zeeeKAIQQlNT3o2fIggmrDXvyasHm0wfdAHxT9LwgkQb5imuYmLLDT1CN0M/r8G6GFuxD1cu6kVvesSqAZdoORcsA9ufXgSvUgRUr/9QNgCVQBy+e53vFtRBXdMA268SsYw53rTb4CapfnveuAFuEKnQOTIAQgvt2Jx5MGrBgEuHRtQgsdEfh4dA5PJgdByEEiYXN4Cbr4P2Z7AM3gD8l0H9g81VLC4fn17v8xYB5Cu+I1B7bEpimRvSZOnxTcQDzjdsw0RyHvvoM3GoUwXl1Lx5f3Y67tzTwFdBg81XYFFGyweMoboorv/viXte4ze/i1ZtU3AKuQOUGoSiLwpguCB9FJyP3TDEKCiUoKJQg/6tLGGzKxAPDNoRlfw1mXKXVozhFURQzsvQ0R1ADNl+FniHLsj39pmsUnFfc2nu8BI8MAQhJTIZ3aCaS8i4sARQUSpBy4itoSj+GsSoE3tHSL5cF8PrHxY2MWNlTrlALkaR1WYDz6l6XTXmmMA2mmt3wDs0Ak5eF8MMFLgBC8QXsEx7GQlMAorJO+i8LQFEU5R0tLfVJUICbVIOa1iGPALtzal3svyyJg748Asyw4/DmZSIu65wLwLFTRXg74jAeN23BfJ0/Y0WAP35a+BYzWnaffagaXIEKXYOurZibm0fwEdeRPF8kRBe9B0xeFrx5mYjNPLsknnv2a3BCRdgTk/DkcdMWzGgYb60IQFEU9eeY0kBmZNn3rPhK1HaOuLwN9opr3Y7oA3mFWGgKwHsxR8AMO47348Qu9jM+TH7aIQtqfWTwN60qvhiMf5btZkRJ/3VK3rYEcKV71OODhCvUo1n+MfpV7+Ptgxnw/SQTBYUSiL+8iG370p9+kfmh4WHj5udmyebYnwxAURTlFVX0l6qmvieEEAyarQjN1S57PG9Pr0Yf/RGsde/g7Lk4FJWeRmpuEhnXbm9baNz8rCPPFzXhvs6qfUzWmiDKDb0bGjoHb3+SU/VvVowMrNjLYMVXwidBAXaiEuxEJXwSFPCJl4MbL0XOqRR0K/72zHFl6/cPDZtnFgx+CruWu7VmP1epjvD7eRAURVEbI4p/tylKmsaIknUyIqU/sGJkeDUZkdIfGDHSa97RUtGGfSW/f70+h6LWqw5wFOoIP8jDfOYqeCyvNUMsRVDOei++ciMrQR3A4tNbWQm0FxWUs361shyKWl8ZzlGWhvqA3s8O//kAvyBoHu9NOpzlC4p6438C8Hr8CN553KkxVTnMAAAAAElFTkSuQmCC",w=/[\s\S]*/i,b=browser.i18n.getMessage("titleMultipleSearchEngines"),h=browser.i18n.getMessage("titleSiteSearch"),p=browser.i18n.getMessage("exactMatch"),m=browser.i18n.getMessage("titleOptions"),y=browser.i18n.getMessage("windowTitle"),x=browser.i18n.getMessage("omniboxDescription"),v=browser.i18n.getMessage("notifySearchEnginesLoaded"),A=browser.i18n.getMessage("notifySearchEngineAdded"),S=browser.i18n.getMessage("notifyUsage"),k=browser.i18n.getMessage("notifySearchEngineWithKeyword"),M=browser.i18n.getMessage("notifyUnknown"),O=browser.i18n.getMessage("notifySearchEngineUrlRequired");let R=!1,F="bottom",T=!0,E=!1,P=!1,L=!1,N=!1,U=!0,C=!0,I=!1,D=!1,W=!1,q=!1,H="Google",Q="https://www.google.com/search?q=",B=!1,X="multiNewWindow",J=!1,G=!1;const $={exactMatch:R,tabMode:"openNewTab",tabActive:P,lastTab:E,optionsMenuLocation:F,displayFavicons:U,displayExifSummary:C,disableAltClick:I,forceSearchEnginesReload:q,resetPreferences:W,forceFaviconsReload:D,siteSearch:H,siteSearchUrl:Q,useRegex:B,multiMode:X,privateMode:J};async function j(e){let o={},t=await browser.storage.sync.get(null).catch((e=>{l&&(console.error(e),console.log("Failed to retrieve data from storage sync."))}));if(t.options&&(o=t.options,l&&console.log(o),delete t.options),Re(o)||o.resetPreferences?o=$:await browser.storage.sync.clear(),l&&console.log(o),await async function(e,o){Z(e),_(e),oe(e),te(e),function(e){l&&console.log("Setting display EXIF summary preference..");C=e.displayExifSummary}(e),se(e),re(e),ne(e),ae(e),ee(e),o&&(await browser.storage.sync.clear(),await V(e,!0))}(o,!0),!Re(t)&&Object.keys(t).length>1)n=Oe(t),K(),Y(),l&&(console.log("Search engines: \n"),console.log(n)),await browser.storage.local.clear(),await ce(),await ie(!1);else{const o=await browser.storage.local.get(null);void 0===o||Re(o)||e?(await browser.storage.local.clear(),await async function(e){let o=new Headers;o.append("Content-Type","application/json");let t=new Request(e,{method:"GET",headers:o});try{const e=await fetch(t);if(!e.ok){const o=`The search engines could not be loaded. An error has occured: ${e.status}`;throw new Error(o)}const o=await e.json();n=Oe(o),K(),Y(),l&&(console.log("Search engines:\n"),console.log(n)),await browser.storage.local.clear(),await ce(),await ie(!0),fe()}catch(e){l&&console.error(e.message)}}(g).catch((e=>{console.error(e),console.log("Failed to retrieve search enginees from local storage.")}))):(n=Oe(o),K(),Y(),l&&(console.log("Search engines: \n"),console.log(n)))}}function K(){for(let e in n)void 0===n[e].regex&&(l&&console.log(`id: ${e}`),n[e].regex={},n[e].regex.body=w.source,n[e].regex.flags=w.flags,l&&console.log(n[e].regex))}function Y(){for(let e in n)void 0===n[e].keyboardShortcut&&(l&&console.log(`id: ${e}`),n[e].keyboardShortcut="",l&&console.log(`keyboard shortcut: ${n[e].keyboardShortcut}`))}async function z(){const e=(await browser.storage.sync.get(null).catch((e=>(l&&(console.error(e),console.log("Failed to retrieve options from sync storage.")),e)))).options;return l&&console.log(e),e}async function V(e,o){if(l){const o=JSON.stringify(e);console.log(`Options settings:\n${o}`)}await browser.storage.sync.set({options:e}).catch((e=>{l&&(console.error(e),console.log("Failed to save options to storage sync."))})),o&&fe(),l&&console.log("Successfully saved the options to storage sync.")}function Z(e){l&&console.log(`Setting exact match to ${e.exactMatch}`),R=e.exactMatch}function _(e){switch(l&&console.log("Setting tab mode.."),P=e.tabActive,E=e.lastTab,J=e.privateMode,e.tabMode){case"openNewTab":T=!0,L=!1,N=!1;break;case"sameTab":T=!1,L=!1,N=!1;break;case"openNewWindow":L=!0,T=!1,N=!1;break;case"openSidebar":N=!0,T=!1,L=!1}}function ee(e){X=e.multiMode}function oe(e){l&&console.log(`Setting the position of options in the context menu to ${e.optionsMenuLocation}`),F=e.optionsMenuLocation}function te(e){l&&console.log("Setting favicons preference.."),U=e.displayFavicons}function se(e){l&&console.log("Setting option to disable Alt-Click.."),I=e.disableAltClick}function ne(e){l&&console.log("Setting site search option.."),H=e.siteSearch,Q=e.siteSearchUrl}function re(e){l&&console.log("Setting reset options.."),q=e.forceSearchEnginesReload,W=e.resetPreferences,D=e.forceFaviconsReload}function ae(e){l&&console.log("Setting whether to use regular expressions..."),B=e.useRegex}async function ie(e){n=Oe(n),l&&(console.log("Search engines:\n"),console.log(n));try{await browser.storage.local.set(n),G&&e&&ke(v),l&&console.log("Search engines have been successfully saved to local storage.")}catch(e){l&&(console.error(e.message),console.log("Failed to save the search engines to local storage."))}}async function ce(){l&&console.log("Fetching favicons..");let e=[];for(let o in n)if(null===n[o].base64||void 0===n[o].base64||D){let t=n[o].url;l&&console.log("id: "+o),l&&console.log("url: "+t);let s=Me(t);l&&console.log("Getting favicon for "+s),e.push(await le(o,s))}if(e.length>0){const o=await Promise.all(e).catch((e=>{l&&(console.error(e),console.log("Not ALL the favcions could be fetched."))}));if(l&&console.log("ALL promises have completed."),void 0===o)return;for(let e of o)l&&(console.log("================================================"),console.log("id is "+e.id),console.log("------------------------------------------------"),console.log("base64 string is "+e.base64),console.log("================================================")),n[e.id].base64=e.base64;l&&console.log("The favicons have ALL been fetched.")}}async function le(e,o){const n=["32x32","[.]png","[.]ico"];let r=[],a=new DOMParser,i=null,c=new Headers;c.append("Content-Type","text/html; charset=UTF-8"),c.append("x-api-key",s);const g=new Request(t+o,{method:"GET",headers:c});try{const t=await fetch(g);if(!t.ok){const e=`Failed to get domain of search engine. An error has occured: ${t.status}`;throw new Error(e)}l&&console.log(t);const s=await t.text(),c=a.parseFromString(s,"text/html").getElementsByTagName("link");for(let e of c){const t=e.getAttribute("rel");if(/icon/i.test(t)){const t=ge(e.href,o);r.push(t)}}l&&console.log(`Domain: ${o}`),l&&console.log(`Links with favicons: ${r}`);for(let o of n)if(l&&console.log(`Checking if url contains: ${o}`),i=de(r,o),null!==i){l&&console.log(`Best icon url: ${i}`);return{id:e,base64:await ue(i)}}return{id:e,base64:f}}catch(o){return l&&console.error(o.message),l&&console.log("Failed to retrieve new favicon."),{id:e,base64:f}}}function ge(e,o){let t=e,s=o,n=[];if(/^(https?:\/\/)/.test(t))return t;if(t.includes("moz-extension://")){let e=t.lastIndexOf("moz-extension://")+16;t=t.substr(e),n=t.split(/\//),n.shift();for(let e of n)s+="/"+e;return s}if(/^(\/\/)/.test(t))return"https:"+t;/^([.]\/|\/)[^/]/.test(t)?(n=t.split(/\//),n.shift()):/^[^/]/.test(t)&&(n=t.split(/\//));for(let e of n)s+="/"+e;return s}function de(e,o){let t=new RegExp(o,"i");for(let o of e)if(t.test(o))return o;return null}async function ue(e){let o=new Headers;o.append("x-api-key",s);const n=new Request(t+e,{method:"GET",headers:o});try{const e=await fetch(n);if(!e.ok){const o=`Failed to fetch the favicon image. An error has occured: ${e.status}`;throw new Error(o)}const o=await e.text();return l&&console.log(o),o}catch(e){return l&&console.log(e.message),f}}function fe(){l&&console.log("Rebuilding context menu.."),browser.runtime.getBrowserInfo().then((e=>{let o=e.version,t=parseInt(o.slice(0,o.search(".")-1));browser.contextMenus.removeAll(),browser.contextMenus.onClicked.removeListener(he),"top"===F&&we(),browser.contextMenus.create({id:"cs-reverse-image-search",title:"Google Reverse Image Search",contexts:["image"]}),browser.contextMenus.create({id:"cs-google-lens",title:"Google Lens",contexts:["image"]}),r=[];let s=Object.keys(n).length;for(let e=1;e<s+1;e++)for(let o in n)if(n[o].index===e){let s=n[o].base64,a="cs-"+e.toString(),i=n[o].name;r.push(o),be(n[o],a,i,s,t)}"bottom"===F&&we(),browser.contextMenus.onClicked.addListener(he)}))}function we(){"bottom"===F&&browser.contextMenus.create({id:"cs-separator",type:"separator",contexts:["selection"]}),browser.contextMenus.create({id:"cs-match",type:"checkbox",title:p,contexts:["selection"],checked:R}),browser.contextMenus.create({id:"cs-multitab",title:b,contexts:["selection"]}),browser.contextMenus.create({id:"cs-site-search",title:`${h} ${H}`,contexts:["selection"]}),browser.contextMenus.create({id:"cs-options",title:m+"...",contexts:["selection"]}),"top"===F&&browser.contextMenus.create({id:"cs-separator",type:"separator",contexts:["selection"]})}function be(e,o,t,s,n){const r=["selection"],i="data:image/png;base64,"+s,c=e.regex.body,l=e.regex.flags,g=new RegExp(c,l);e.show&&(B&&null===a.match(g)||(n>=56&&!0===U?browser.contextMenus.create({id:o,title:t,contexts:r,icons:{20:i}}):browser.contextMenus.create({id:o,title:t,contexts:r})))}async function he(e,o){let t,s,n=e.menuItemId.replace("cs-","");void 0!==e.selectionText&&(e.selectionText.length<150||e.selectionText.length>150)&&(a=e.selectionText.trim()),N&&"reverse-image-search"!==n&&"google-lens"!==n?(await browser.sidebarAction.open(),await browser.sidebarAction.setPanel({panel:""})):(await browser.sidebarAction.close(),t=o.index+1);const c=await browser.tabs.query({currentWindow:!0});if(s=c[c.length-1].index+1,E&&(t=s),"multiAfterLastTab"!==X&&(s=t+1),"reverse-image-search"===n)return l&&console.log(i),void xe(u+i,t);if("google-lens"===n)return l&&console.log(i),void xe(d+i,t);if("site-search"===n&&!Re(i)){if(l&&console.log(i),N){const e=Me(o.url).replace(/https?:\/\//,""),t=await z();return i=t.siteSearchUrl+Se(`site:https://${e} ${a}`),Fe(i),void browser.sidebarAction.setTitle({title:"Search results"})}return void xe(i,t)}if("options"===n)return void browser.runtime.openOptionsPage().then(null,Ae);if("multitab"===n)return void pe(s);if("match"===n)return void z().then((e=>{let o=e.options;l&&console.log(`Preferences retrieved from sync storage: ${JSON.stringify(o)}`),o.exactMatch=!R,Z(o),V(o,!0)}));let g=parseInt(n);isNaN(g)||ye(r[g-1],t)}async function pe(e){const o=await browser.storage.local.get(null);n=Oe(o);let t=[];for(let e in n)n[e].multitab&&t.push(me(n[e].url,a));if(G&&Re(t))return void ke("Search engines have not been selected for a multi-search.");const s=t.length;if(l&&console.log(t),"multiNewWindow"===X)await browser.windows.create({titlePreface:y+"'"+a+"'",url:t,incognito:J});else for(let o=0;o<s;o++)await browser.tabs.create({index:e+o,url:t[o]})}function me(e,o){let t="";return R&&(t="%22"),e.includes("{searchTerms}")?e.replace(/{searchTerms}/g,Se(o)):e.includes("%s")?e.replace(/%s/g,Se(o)):e+t+Se(o)+t}function ye(e,o){let t=n[e].url;if(i=me(t,a),l&&console.log(`Target url: ${i}`),N)return browser.sidebarAction.setPanel({panel:i}),Fe(i),void browser.sidebarAction.setTitle({title:"Search results"});xe(i,o)}async function xe(e,o){l&&console.log("Tab position: "+o);const t=(await browser.windows.getCurrent({populate:!1})).id;L?(await browser.windows.create({url:e,incognito:J}),P||await browser.windows.update(t,{focused:!0})):T?browser.tabs.create({active:P,index:o,url:e}):(l&&console.log("Opening search results in same tab, url is "+e),browser.tabs.update({url:e}))}function ve(e){let o=[],t="";if(R&&(t="%22"),-1===e.indexOf(" "))return c="",o;let s=e.split(" ")[0],r=e.replace(s,"").trim();l&&console.log(r);let g=!0;if(c==s&&(g=!1),c=s,"!"===s){return a=r,[{content:"",description:"Perform multisearch for "+r}]}if("."===s){return[{content:"",description:"Open options page"}]}if("!b"===s||"bookmarks"===s){return[{content:"",description:"Search bookmarks"}]}if("!h"===s||"history"===s){return[{content:"",description:"Search history"}]}for(let e in n)if(n[e].keyword===s){let s={},a=n[e].url;return i=a.includes("{searchTerms}")?a.replace(/{searchTerms}/g,Se(r)):a.includes("%s")?a.replace(/%s/g,Se(r)):a+t+Se(r)+t,s.content=i,s.description="Search "+n[e].name+" for "+r,l&&console.log(JSON.stringify(s)),o.push(s),o}return G&&g&&ke(k+" "+s+" "+M),o}function Ae(e){l&&console.error(`${e}`)}function Se(e){return function(e){let o="";try{return o=e!==decodeURIComponent(e),o}catch(e){return!1}}(e)?e:encodeURIComponent(e)}function ke(e){browser.notifications.create(e.substring(0,20),{type:"basic",iconUrl:"icons/icon_64.png",title:browser.i18n.getMessage("extensionName"),message:e})}function Me(e){let o="";return o=-1!==e.indexOf("://")?e.split("://")[0]+"://":"https://",o+e.replace("http://","").replace("https://","").split(/[/?#]/)[0]}function Oe(e){let o=JSON.parse(JSON.stringify(e)),t=Object.keys(e).length,s=[],n=[],r=0;l&&console.log(e);for(let o in e)l&&console.log(`id = ${o}`),Re(e[o].index)&&(e[o].index=t+1,t++),s.push(e[o].index),n.push(o);for(let e=1;e<t+1;e++){r=Math.min(...s);let t=s.indexOf(r);s.splice(t,1),o[n.splice(t,1)].index=e}return o}function Re(e){return"number"!=typeof e&&("string"==typeof e?0===e.trim().length:Array.isArray(e)?0===e.length:"object"==typeof e?null===e||0===Object.keys(e).length:"boolean"!=typeof e&&!e)}function Fe(e){browser.sidebarAction.setPanel({panel:e})}browser.pageAction.onClicked.addListener((function(e){!async function(e,o){const t=e.id;await browser.tabs.sendMessage(t,o).catch((t=>{l&&(console.error(t),console.log(`Failed to send message ${JSON.stringify(o)} to:\n`),console.log(`Tab ${e.id}: ${e.title}\n`))})),l&&(console.log("Successfully sent message to:\n"),console.log(`Tab ${e.id}: ${e.title}\n`))}(e,{action:"getSearchEngine",data:""})})),browser.webRequest.onBeforeSendHeaders.addListener((function(e){if(!N)return{};console.log(`Intercepted header: ${e.requestHeaders}`);for(const o of e.requestHeaders)"user-agent"===o.name.toLowerCase()&&(o.value="Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/12.0 Mobile/15A372 Safari/604.1");return console.log(`Modified header: ${e.requestHeaders}`),{requestHeaders:e.requestHeaders}}),{tabId:-1,types:["main_frame"],urls:["http://*/*","https://*/*"]},["blocking","requestHeaders"]),browser.runtime.onMessage.addListener((async(e,o)=>{let t,s,r,c,g,d,u="",f="";switch(e.action){case"doSearch":if(u=e.data.id,l&&console.log("Search engine id: "+u),l&&console.log(N),t=(await browser.tabs.query({active:!0,currentWindow:!0}))[0],l&&console.log("Active tab url: "+t.url),g=await browser.tabs.query({currentWindow:!0}),l&&console.log(g),s=g[g.length-1],r=t.index,l&&console.log("Active tab index: "+r),c="multiAfterLastTab"===X?s.index+1:r+1,"multisearch"===u)return void pe(c);if(N)return void ye(u,null);E&&(r=s.index),ye(u,r+1);break;case"notify":G&&ke(e.data);break;case"setSelection":l&&console.log(`Selected text: ${e.data}`),a=e.data;break;case"reset":!async function(){l&&console.log("Resetting extension's preferences and search engines as per user reset preferences.");const e=(await browser.storage.sync.get(null).catch((e=>{l&&(console.error(e),console.log("Failed to retrieve options from storage sync."))}))).options,o=e.forceSearchEnginesReload;l&&console.log("Options:");l&&console.log(e);await j(o),fe()}();break;case"setTargetUrl":e.data&&(i=e.data);break;case"testSearchEngine":!function(e){if(""!=e.url){let o=me(e.url,"test");browser.tabs.create({url:o})}else G&&ke(O)}(e.data);break;case"saveSearchEngines":n=Oe(e.data),l&&console.log(n),await browser.storage.local.clear().catch((e=>{l&&(console.error(e),console.log("Failed to clear local storage."))})),await ie(!1),fe();break;case"addNewSearchEngine":u=e.data.id,f=Me(e.data.searchEngine.url),l&&console.log(u,f),n[u]=e.data.searchEngine,n=Oe(n),await async function(e,o){await browser.storage.local.clear().catch((e=>{l&&(console.error(e),console.log("Failed to clear local storage."))}));const t=await le(e,o);n[e].base64=t.base64,await ie(!1),fe(),G&&ke(A)}(u,f);break;case"updateSearchOptions":d=await z(),l&&console.log(`Preferences retrieved from sync storage: ${JSON.stringify(d)}`),d.exactMatch=e.data.exactMatch,Z(d),await V(d,!0);break;case"updateDisplayFavicons":d=await z(),l&&console.log(`Preferences retrieved from sync storage: ${JSON.stringify(d)}`),d.displayFavicons=e.data.displayFavicons,te(d),await V(d,!0);break;case"updateDisableAltClick":d=await z(),l&&console.log(`Preferences retrieved from sync storage: ${JSON.stringify(d)}`),d.disableAltClick=e.data.disableAltClick,se(d),await V(d,!1);break;case"updateTabMode":d=await z(),l&&console.log(`Preferences retrieved from sync storage: ${JSON.stringify(d)}`),d.tabMode=e.data.tabMode,d.tabActive=e.data.tabActive,d.lastTab=e.data.lastTab,d.privateMode=e.data.privateMode,_(d),await V(d,!1);break;case"updateMultiMode":d=await z(),l&&console.log(`Preferences retrieved from sync storage: ${JSON.stringify(d)}`),d.multiMode=e.data.multiMode,ee(d),await V(d,!1);break;case"updateOptionsMenuLocation":d=await z(),l&&console.log(`Preferences retrieved from sync storage: ${JSON.stringify(d)}`),d.optionsMenuLocation=e.data.optionsMenuLocation,oe(d),await V(d,!0);break;case"updateSiteSearchSetting":d=await z(),l&&console.log(`Preferences retrieved from sync storage: ${JSON.stringify(d)}`),d.siteSearch=e.data.siteSearch,d.siteSearchUrl=e.data.siteSearchUrl,ne(d),await V(d,!0);break;case"updateResetOptions":d=await z(),l&&(console.log("Preferences retrieved from sync storage:"),console.log(d)),d.forceSearchEnginesReload=e.data.resetOptions.forceSearchEnginesReload,d.resetPreferences=e.data.resetOptions.resetPreferences,d.forceFaviconsReload=e.data.resetOptions.forceFaviconsReload,re(d),await V(d,!1);break;case"updateUseRegex":d=await z(),l&&console.log(`Preferences retrieved from sync storage: ${JSON.stringify(d)}`),d.useRegex=e.data.useRegex,ae(d),await V(d,!0);break;case"saveSearchEnginesToDisk":browser.downloads.download({url:e.data,saveAs:!0,filename:"searchEngines.json"});break;case"hidePageAction":browser.pageAction.hide(o.tab.id);break;case"showPageAction":browser.pageAction.show(o.tab.id)}})),browser.omnibox.setDefaultSuggestion({description:x}),browser.omnibox.onInputChanged.addListener(((e,o)=>{if(e.indexOf(" ")>0){let t=ve(e);l&&console.log(JSON.stringify(t)),1===t.length&&o(t)}})),browser.omnibox.onInputEntered.addListener((async t=>{let s,n,r;l&&console.log(t);const a=await browser.tabs.query({currentWindow:!0,active:!0});s=a[0].index,r=a[0].id;const i=await browser.tabs.query({currentWindow:!0});if(E&&(s=i.length+1),l&&console.log(X),n="multiAfterLastTab"===X?i.length+1:s+1,l&&console.log(n),l&&console.log(t.indexOf("://")),t.indexOf("://")>-1)l&&console.log("Processing search..."),xe(t,s);else try{const a=t.split(" ")[0],i=t.replace(a,"").trim(),c=ve(t);switch(a){case".":browser.runtime.openOptionsPage();break;case"!":pe(n);break;case"bookmarks":case"!b":o="recent"===i?await browser.bookmarks.getRecent(10):await browser.bookmarks.search({query:i}),l&&console.log(o),await browser.storage.local.set({bookmarkItems:o,searchTerms:i}),await browser.tabs.create({active:P,index:n,url:"/bookmarks.html"});break;case"history":case"!h":e=await browser.history.search({text:i}),await browser.storage.local.set({historyItems:e,searchTerms:i}),await browser.tabs.create({active:P,index:n,url:"/history.html"});break;default:1===c.length?xe(c[0].content,s):(browser.search.search({query:i,tabId:r}),G&&ke(S))}}catch(e){l&&console.error(e),l&&console.log("Failed to process "+t)}})),async function(){if(l){const e=await browser.storage.sync.getBytesInUse(null).catch((e=>{console.error(e),console.log("Failed to retrieve storage space used by storage sync.")}));console.log(`Bytes used by storage sync: ${e} bytes.`);const o=await browser.storage.local.get(null);console.log(`Bytes used by local storage: ${JSON.stringify(o).length} bytes.`)}G="granted"===(await navigator.permissions.query({name:"notifications"})).state;const e=await async function(){const e=await fetch(browser.runtime.getURL("config.json")),o=await e.json();return o}();t=e.API_URL,s=e.API_KEY,await j(!1),fe()}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dE8sZ0JBRTlELENBRUFoRCxFQUVJLG1CQURPdVIsVUFBVUMsWUFBWW5HLE1BQU0sQ0FBRTFCLEtBQU0sbUJBQW9COEgsTUFJbkUsTUFBTUMsUUE0bUNWeFEsaUJBQ0ksTUFBTStDLFFBQWlCQyxNQUFNbEcsUUFBUWtLLFFBQVF5SixPQUFPLGdCQUM5Q0QsUUFBZXpOLEVBQVNNLE9BQzlCLE9BQU9tTixDQUNYLENBaG5DeUJFLEdBQ3JCMVUsRUFBZXdVLEVBQU9HLFFBQ3RCMVUsRUFBZXVVLEVBQU9JLGNBR2hCM1EsR0FBa0MsR0FDeENxRCxJQUNKLENBMm1DQXVOLEUiLCJzb3VyY2VzIjpbInNyYy9zY3JpcHRzL2JhY2tncm91bmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vLy8gR2xvYmFsIHZhcmlhYmxlc1xuLyogZ2xvYmFsICAqL1xubGV0IHNlYXJjaEVuZ2luZXMgPSB7fTtcbmxldCBzZWFyY2hFbmdpbmVzQXJyYXkgPSBbXTtcbmxldCBzZWxlY3Rpb24gPSAnJztcbmxldCB0YXJnZXRVcmwgPSAnJztcbmxldCBsYXN0QWRkcmVzc0JhcktleXdvcmQgPSAnJztcbmxldCBoaXN0b3J5SXRlbXMsIGJvb2ttYXJrSXRlbXM7XG5sZXQgQ09SU19BUElfVVJMO1xubGV0IENPUlNfQVBJX0tFWTtcblxuLy8vIENvbnN0YW50c1xuLy8gRGVidWdcbmNvbnN0IGxvZ1RvQ29uc29sZSA9IGZhbHNlO1xuXG4vL2NvbnN0IEZJUkVGT1hfVkVSU0lPTiA9IC9ydjooWzAtOS5dKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudClbMV07XG4vL2NvbnN0IGNvbnRleHRzZWFyY2hfdXNlckFnZW50ID0gYE1vemlsbGEvNS4wIChBbmRyb2lkIDQuNDsgTW9iaWxlOyBydjoke0ZJUkVGT1hfVkVSU0lPTn0pIEdlY2tvLyR7RklSRUZPWF9WRVJTSU9OfSBGaXJlZm94LyR7RklSRUZPWF9WRVJTSU9OfWA7XG5jb25zdCBjb250ZXh0c2VhcmNoX3VzZXJBZ2VudCA9XG4gICAgJ01vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTJfMCBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC82MDQuMS4zOCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vMTIuMCBNb2JpbGUvMTVBMzcyIFNhZmFyaS82MDQuMSc7XG5jb25zdCBERUZBVUxUX1NFQVJDSF9FTkdJTkVTID0gJ2RlZmF1bHRTZWFyY2hFbmdpbmVzLmpzb24nO1xuY29uc3QgZ29vZ2xlTGVuc1VybCA9ICdodHRwczovL2xlbnMuZ29vZ2xlLmNvbS91cGxvYWRieXVybD91cmw9JztcbmNvbnN0IGdvb2dsZVJldmVyc2VJbWFnZVNlYXJjaFVybCA9XG4gICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoYnlpbWFnZT9zYmlzcmM9MSZzYWZlPW9mZiZpbWFnZV91cmw9JztcbmNvbnN0IGJhc2U2NENvbnRleHRTZWFyY2hJY29uID1cbiAgICAnaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUNBQUFBQWdDQVlBQUFCemVucjBBQUFHMkVsRVFWUlloZTJXYTFDVFZ4ckgzMW8vN2V6TTdreG5kbmRtdjZ3anM0YUVKQ0NpT3gyMHNPUFlkbXM3dWhCYVVib3U1WTRKQklHb2dGeGlSN0JlcW1XZ1NpQVJDQWx2eUEyb0VNQUFCYmtaVkM2Q0JBa0dNQ0dCbytqWTJXNUgvZmVEd2hnVG9MUzdzMS8ybVhtK3ZjLzUvOTcvYzU1ekRrWDlQOVlZUWNuYTMvcnd0YnNDVXVzRXZJS1dNOXZTOUdJZmdaYlBPbFR6cnIrSS9zMS9TM2VkcEw3LzdNbXFiODNaNWUzUERMMWpzRHVjSUlUZzNzd3NkbVZxd0JYcXdVblNQV01uNjVwWmZIVW9qMGUvK1I5UjVvbjE3d21MV3F6WnNuYnNTS094STEwTm84a01RZ2dJSWJnMU5nV09nQVpYcUgrWk9uQUZOUDRxVXQxaFJrbTMvd0pwckt0c3ZsWFhkc1A4UFB0eU8xS0tXM0NwM2dSMlhBVTZCeWJRTnp5SlkyWHRDRTZuOFhleEh0eGtIYmhDSGZ5VGxCZ2VuOGJrdEIxWHVrZWVINzFrbEZBVTFxMU5Hbmlqc1dka29NSndFNEdwS29oS2pJZzhmUVUrOFhKd2tqUTRVZG1Kd0RRMXVFSWRBb1ExQ0V4WGc4Mm53VTZRWTNoOEdvcVdBWFFQV1dDZG1jV1V6WUhHM3RIaE5VRm92aDF1SUlUZ2FHa2JkbVZvTURGbGgzTnVIcnN5dEM5NkxhaDV4WEk5T0FJMVFzUzE0SWwxU0x4Z1FFcHhDOFltN3krMWlSQUNUZnRRMDA4U2x6YmNQRGczUDc5VXVMaVFjMjRlK1lvdWNBUnFGL0ZGb0QwNVdranErM0hINGlxOG1IUHo4NUExWFA5c1ZldjdSeWVmdkY1OFk5U0trRHdkZ3ROcGNKSTA3Z0RKV3V3OHFvTERPZWRSZkRGdmp0Nzdic1ZXeUEwM01sOHZNcHJNQ0V4VmdTdFF1Vm0vbU94RDFiQk0yeUZ2SGtDUVNJMkx0U2IwRFUvQ01tMTNnNmd3M014ZUZxQ3Qzenp6NnNkRDQxUGc4bW1Qb2k0QWZCcW42VzZrbHhpUlh0S0t3TU5LN0R5aVF2akpPbFFiQjEwQTJ2dk5Oby9pRjAybVg5bG1uYzhKSWJBN25ERGZzeUg0aU9iRlhLOENzUE9vQnVOVzI1SklVOThZZEIyM1VheS9qc2FlT3k0QWRvY1ROTjM2YXplQWF1TndpTjNoeExHeWRnU21xaEJSVU8reDMyNlpwTUwxMjVQTDlyMTcwSUpSeXd3SUlUZ3ViVWRqengyVU5mUWZjQU5RdG8wVVhMODlDVTZpQWp2U1ZPRHdWZUFrYTFjRmlEMXZXSEhqVGRrY09LWHNBaUVFSXhNek9GSFppWURFcWpBM2dLeUszbU9XYVR1dW1zeEl1MlI4dWVGV3QvOXplZWVLQUlRUWxOVDNvMmZJZ2dtckRYdnlhc0htMHdmZEFIeFQ5THdna1FiNWltdVltTExEVDFDTjBNL3I4RzZHRnV4RDFjdTZrVnZlc1NxQVpkb09SY3NBOXVmWGdTdlVnUlVyLzlRTmdDVlFCeStlNTN2RnRSQlhkTUEyNjhTc1l3NTNyVGI0Q2FwZm52ZXVBRnVFS25RT1RJQVFndnQySng1TUdyQmdFdUhSdFFnc2RFZmg0ZEE1UEpnZEJ5RUVpWVhONENicjRQMlo3QU0zZ0Q4bDBIOWc4MVZMQzRmbjE3djh4WUI1Q3UrSTFCN2JFcGltUnZTWk9ueFRjUUR6amRzdzBSeUh2dm9NM0dvVXdYbDFMeDVmM1k2N3R6VHdGZEJnODFYWUZGR3l3ZU1vYm9vcnYvdmlYdGU0emUvaTFadFUzQUt1UU9VR29TaUx3cGd1Q0I5Rkp5UDNUREVLQ2lVb0tKUWcvNnRMR0d6S3hBUEROb1JsZncxbVhLWFZvemhGVVJRenN2UTBSMUFETmwrRm5pSExzajM5cG1zVW5GZmMybnU4Qkk4TUFRaEpUSVozYUNhUzhpNHNBUlFVU3BCeTRpdG9TaitHc1NvRTN0SFNMNWNGOFBySHhZMk1XTmxUcmxBTGthUjFXWUR6Nmw2WFRYbW1NQTJtbXQzd0RzMEFrNWVGOE1NRkxnQkM4UVhzRXg3R1FsTUFvckpPK2k4TFFGRVU1UjB0TGZWSlVJQ2JWSU9hMWlHUEFMdHphbDNzdnl5Smc3NDhBc3l3NC9EbVpTSXU2NXdMd0xGVFJYZzc0akFlTjIzQmZKMC9ZMFdBUDM1YStCWXpXbmFmZmFnYVhJRUtYWU91clppYm0wZndFZGVSUEY4a1JCZTlCMHhlRnJ4NW1Zak5QTHNrbm52MmEzQkNSZGdUay9Ea2NkTVd6R2dZYjYwSVFGRVU5ZWVZMGtCbVpObjNyUGhLMUhhT3VMd045b3ByM1k3b0EzbUZXR2dLd0hzeFI4QU1PNDczNDhRdTlqTStUSDdhSVF0cWZXVHdONjBxdmhpTWY1YnRaa1JKLzNWSzNyWUVjS1Y3MU9PRGhDdlVvMW4rTWZwVjcrUHRneG53L1NRVEJZVVNpTCs4aUczNzBwOStrZm1oNFdIajV1ZG15ZWJZbnd4QVVSVGxGVlgwbDZxbXZpZUVFQXlhclFqTjFTNTdQRzlQcjBZZi9SR3NkZS9nN0xrNEZKV2VSbXB1RWhuWGJtOWJhTno4ckNQUEZ6WGh2czZxZlV6V21pREtEYjBiR2pvSGIzK1NVL1Z2Vm93TXJOakxZTVZYd2lkQkFYYWlFdXhFSlh3U0ZQQ0psNE1iTDBYT3FSUjBLLzcyekhGbDYvY1BEWnRuRmd4K0NydVd1N1ZtUDFlcGp2RDdlUkFVUlZFYkk0cC90eWxLbXNhSWtuVXlJcVUvc0dKa2VEVVprZElmR0RIU2E5N1JVdEdHZlNXL2Y3MCtoNkxXcXc1d0ZPb0lQOGpEZk9ZcWVDeXZOVU1zUlZET2VpKytjaU1yUVIzQTR0TmJXUW0wRnhXVXMzNjFzaHlLV2w4WnpsR1dodnFBM3M4Ty8va0F2eUJvSHU5Tk9wemxDNHA2NDM4QzhIcjhDTjU1M0treFZUbk1BQUFBQUVsRlRrU3VRbUNDJztcbi8vIEFkdmFuY2VkIGZlYXR1cmVcbmNvbnN0IGRlZmF1bHRSZWdleCA9IC9bXFxzXFxTXSovaTtcblxuLy8gVGhpcyBpcyBhIFJlcXVlc3RGaWx0ZXI6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL0FkZC1vbnMvV2ViRXh0ZW5zaW9ucy9BUEkvd2ViUmVxdWVzdC9SZXF1ZXN0RmlsdGVyXG4vLyBJdCBtYXRjaGVzIHRhYnMgdGhhdCBhcmVuJ3QgYXR0YWNoZWQgdG8gYSBub3JtYWwgbG9jYXRpb24gKGxpa2UgYSBzaWRlYmFyKVxuLy8gSXQgb25seSBtYXRjaGVzIGVtYmVkZGVkIGlmcmFtZXNcbmNvbnN0IHJlcXVlc3RGaWx0ZXIgPSB7XG4gICAgdGFiSWQ6IC0xLFxuICAgIHR5cGVzOiBbJ21haW5fZnJhbWUnXSxcbiAgICB1cmxzOiBbJ2h0dHA6Ly8qLyonLCAnaHR0cHM6Ly8qLyonXSxcbn07XG5cbi8vIENvbnN0YW50cyBmb3IgdHJhbnNsYXRpb25zXG5jb25zdCB0aXRsZU11bHRpcGxlU2VhcmNoRW5naW5lcyA9IGJyb3dzZXIuaTE4bi5nZXRNZXNzYWdlKFxuICAgICd0aXRsZU11bHRpcGxlU2VhcmNoRW5naW5lcydcbik7XG5jb25zdCB0aXRsZVNpdGVTZWFyY2ggPSBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZSgndGl0bGVTaXRlU2VhcmNoJyk7XG5jb25zdCB0aXRsZUV4YWN0TWF0Y2ggPSBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZSgnZXhhY3RNYXRjaCcpO1xuY29uc3QgdGl0bGVPcHRpb25zID0gYnJvd3Nlci5pMThuLmdldE1lc3NhZ2UoJ3RpdGxlT3B0aW9ucycpO1xuY29uc3Qgd2luZG93VGl0bGUgPSBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZSgnd2luZG93VGl0bGUnKTtcbmNvbnN0IG9tbmlib3hEZXNjcmlwdGlvbiA9IGJyb3dzZXIuaTE4bi5nZXRNZXNzYWdlKCdvbW5pYm94RGVzY3JpcHRpb24nKTtcbmNvbnN0IG5vdGlmeVNlYXJjaEVuZ2luZXNMb2FkZWQgPSBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZShcbiAgICAnbm90aWZ5U2VhcmNoRW5naW5lc0xvYWRlZCdcbik7XG5jb25zdCBub3RpZnlTZWFyY2hFbmdpbmVBZGRlZCA9IGJyb3dzZXIuaTE4bi5nZXRNZXNzYWdlKFxuICAgICdub3RpZnlTZWFyY2hFbmdpbmVBZGRlZCdcbik7XG5jb25zdCBub3RpZnlVc2FnZSA9IGJyb3dzZXIuaTE4bi5nZXRNZXNzYWdlKCdub3RpZnlVc2FnZScpO1xuY29uc3Qgbm90aWZ5U2VhcmNoRW5naW5lV2l0aEtleXdvcmQgPSBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZShcbiAgICAnbm90aWZ5U2VhcmNoRW5naW5lV2l0aEtleXdvcmQnXG4pO1xuY29uc3Qgbm90aWZ5VW5rbm93biA9IGJyb3dzZXIuaTE4bi5nZXRNZXNzYWdlKCdub3RpZnlVbmtub3duJyk7XG5jb25zdCBub3RpZnlTZWFyY2hFbmdpbmVVcmxSZXF1aXJlZCA9IGJyb3dzZXIuaTE4bi5nZXRNZXNzYWdlKFxuICAgICdub3RpZnlTZWFyY2hFbmdpbmVVcmxSZXF1aXJlZCdcbik7XG5cbi8vLyBQcmVmZXJlbmNlcyAtIERlZmF1bHQgc2V0dGluZ3NcbmxldCBjb250ZXh0c2VhcmNoX2V4YWN0TWF0Y2ggPSBmYWxzZTtcbmxldCBjb250ZXh0c2VhcmNoX3RhYk1vZGUgPSAnb3Blbk5ld1RhYic7XG5sZXQgY29udGV4dHNlYXJjaF9vcHRpb25zTWVudUxvY2F0aW9uID0gJ2JvdHRvbSc7XG5sZXQgY29udGV4dHNlYXJjaF9vcGVuU2VhcmNoUmVzdWx0c0luTmV3VGFiID0gdHJ1ZTtcbmxldCBjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5MYXN0VGFiID0gZmFsc2U7XG5sZXQgY29udGV4dHNlYXJjaF9tYWtlTmV3VGFiT3JXaW5kb3dBY3RpdmUgPSBmYWxzZTtcbmxldCBjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5OZXdXaW5kb3cgPSBmYWxzZTtcbmxldCBjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5TaWRlYmFyID0gZmFsc2U7XG5sZXQgY29udGV4dHNlYXJjaF9kaXNwbGF5RmF2aWNvbnMgPSB0cnVlO1xubGV0IGNvbnRleHRzZWFyY2hfZGlzcGxheUV4aWZTdW1tYXJ5ID0gdHJ1ZTtcbmxldCBjb250ZXh0c2VhcmNoX2Rpc2FibGVBbHRDbGljayA9IGZhbHNlO1xubGV0IGNvbnRleHRzZWFyY2hfZm9yY2VGYXZpY29uc1JlbG9hZCA9IGZhbHNlO1xubGV0IGNvbnRleHRzZWFyY2hfcmVzZXRQcmVmZXJlbmNlcyA9IGZhbHNlO1xubGV0IGNvbnRleHRzZWFyY2hfZm9yY2VTZWFyY2hFbmdpbmVzUmVsb2FkID0gZmFsc2U7XG5sZXQgY29udGV4dHNlYXJjaF9zaXRlU2VhcmNoID0gJ0dvb2dsZSc7XG5sZXQgY29udGV4dHNlYXJjaF9zaXRlU2VhcmNoVXJsID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3E9JztcbmxldCBjb250ZXh0c2VhcmNoX3VzZVJlZ2V4ID0gZmFsc2U7XG5sZXQgY29udGV4dHNlYXJjaF9tdWx0aU1vZGUgPSAnbXVsdGlOZXdXaW5kb3cnO1xubGV0IGNvbnRleHRzZWFyY2hfcHJpdmF0ZU1vZGUgPSBmYWxzZTtcbmxldCBub3RpZmljYXRpb25zRW5hYmxlZCA9IGZhbHNlO1xuXG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBleGFjdE1hdGNoOiBjb250ZXh0c2VhcmNoX2V4YWN0TWF0Y2gsXG4gICAgdGFiTW9kZTogY29udGV4dHNlYXJjaF90YWJNb2RlLFxuICAgIHRhYkFjdGl2ZTogY29udGV4dHNlYXJjaF9tYWtlTmV3VGFiT3JXaW5kb3dBY3RpdmUsXG4gICAgbGFzdFRhYjogY29udGV4dHNlYXJjaF9vcGVuU2VhcmNoUmVzdWx0c0luTGFzdFRhYixcbiAgICBvcHRpb25zTWVudUxvY2F0aW9uOiBjb250ZXh0c2VhcmNoX29wdGlvbnNNZW51TG9jYXRpb24sXG4gICAgZGlzcGxheUZhdmljb25zOiBjb250ZXh0c2VhcmNoX2Rpc3BsYXlGYXZpY29ucyxcbiAgICBkaXNwbGF5RXhpZlN1bW1hcnk6IGNvbnRleHRzZWFyY2hfZGlzcGxheUV4aWZTdW1tYXJ5LFxuICAgIGRpc2FibGVBbHRDbGljazogY29udGV4dHNlYXJjaF9kaXNhYmxlQWx0Q2xpY2ssXG4gICAgZm9yY2VTZWFyY2hFbmdpbmVzUmVsb2FkOiBjb250ZXh0c2VhcmNoX2ZvcmNlU2VhcmNoRW5naW5lc1JlbG9hZCxcbiAgICByZXNldFByZWZlcmVuY2VzOiBjb250ZXh0c2VhcmNoX3Jlc2V0UHJlZmVyZW5jZXMsXG4gICAgZm9yY2VGYXZpY29uc1JlbG9hZDogY29udGV4dHNlYXJjaF9mb3JjZUZhdmljb25zUmVsb2FkLFxuICAgIHNpdGVTZWFyY2g6IGNvbnRleHRzZWFyY2hfc2l0ZVNlYXJjaCxcbiAgICBzaXRlU2VhcmNoVXJsOiBjb250ZXh0c2VhcmNoX3NpdGVTZWFyY2hVcmwsXG4gICAgdXNlUmVnZXg6IGNvbnRleHRzZWFyY2hfdXNlUmVnZXgsXG4gICAgbXVsdGlNb2RlOiBjb250ZXh0c2VhcmNoX211bHRpTW9kZSxcbiAgICBwcml2YXRlTW9kZTogY29udGV4dHNlYXJjaF9wcml2YXRlTW9kZSxcbn07XG5cbi8vLyBIYW5kbGUgUGFnZSBBY3Rpb24gY2xpY2tcbmJyb3dzZXIucGFnZUFjdGlvbi5vbkNsaWNrZWQuYWRkTGlzdGVuZXIoaGFuZGxlUGFnZUFjdGlvbik7XG5cbi8vLyBBZGQgYSBtb2JpbGUgaGVhZGVyIHRvIG91dGdvaW5nIHJlcXVlc3RzXG5icm93c2VyLndlYlJlcXVlc3Qub25CZWZvcmVTZW5kSGVhZGVycy5hZGRMaXN0ZW5lcihcbiAgICByZXdyaXRlVXNlckFnZW50SGVhZGVyLFxuICAgIHJlcXVlc3RGaWx0ZXIsXG4gICAgWydibG9ja2luZycsICdyZXF1ZXN0SGVhZGVycyddXG4pO1xuXG4vKlxuUmV3cml0ZSB0aGUgVXNlci1BZ2VudCBoZWFkZXIgdG8gY29udGV4dHNlYXJjaF91c2VyQWdlbnRcbiovXG5mdW5jdGlvbiByZXdyaXRlVXNlckFnZW50SGVhZGVyKGUpIHtcbiAgICBpZiAoIWNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJblNpZGViYXIpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhgSW50ZXJjZXB0ZWQgaGVhZGVyOiAke2UucmVxdWVzdEhlYWRlcnN9YCk7XG4gICAgZm9yIChjb25zdCBoZWFkZXIgb2YgZS5yZXF1ZXN0SGVhZGVycykge1xuICAgICAgICBpZiAoaGVhZGVyLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3VzZXItYWdlbnQnKSB7XG4gICAgICAgICAgICBoZWFkZXIudmFsdWUgPSBjb250ZXh0c2VhcmNoX3VzZXJBZ2VudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhgTW9kaWZpZWQgaGVhZGVyOiAke2UucmVxdWVzdEhlYWRlcnN9YCk7XG4gICAgcmV0dXJuIHsgcmVxdWVzdEhlYWRlcnM6IGUucmVxdWVzdEhlYWRlcnMgfTtcbn1cblxuLy8vIEhhbmRsZSBJbmNvbWluZyBNZXNzYWdlc1xuLy8gTGlzdGVuIGZvciBtZXNzYWdlcyBmcm9tIHRoZSBjb250ZW50IG9yIG9wdGlvbnMgc2NyaXB0XG5icm93c2VyLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKGFzeW5jIChtZXNzYWdlLCBzZW5kZXIpID0+IHtcbiAgICBsZXQgaWQgPSAnJztcbiAgICBsZXQgZG9tYWluID0gJyc7XG4gICAgbGV0IGFjdGl2ZVRhYiwgbGFzdFRhYiwgYWN0aXZlVGFiSW5kZXgsIHRhYlBvc2l0aW9uLCB0YWJzLCBvcHRpb25zO1xuICAgIHN3aXRjaCAobWVzc2FnZS5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnZG9TZWFyY2gnOlxuICAgICAgICAgICAgaWQgPSBtZXNzYWdlLmRhdGEuaWQ7XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZygnU2VhcmNoIGVuZ2luZSBpZDogJyArIGlkKTtcbiAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJblNpZGViYXIpO1xuICAgICAgICAgICAgYWN0aXZlVGFiID0gKFxuICAgICAgICAgICAgICAgIGF3YWl0IGJyb3dzZXIudGFicy5xdWVyeSh7IGFjdGl2ZTogdHJ1ZSwgY3VycmVudFdpbmRvdzogdHJ1ZSB9KVxuICAgICAgICAgICAgKVswXTtcbiAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKCdBY3RpdmUgdGFiIHVybDogJyArIGFjdGl2ZVRhYi51cmwpO1xuICAgICAgICAgICAgdGFicyA9IGF3YWl0IGJyb3dzZXIudGFicy5xdWVyeSh7IGN1cnJlbnRXaW5kb3c6IHRydWUgfSk7XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyh0YWJzKTtcbiAgICAgICAgICAgIGxhc3RUYWIgPSB0YWJzW3RhYnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBhY3RpdmVUYWJJbmRleCA9IGFjdGl2ZVRhYi5pbmRleDtcbiAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKCdBY3RpdmUgdGFiIGluZGV4OiAnICsgYWN0aXZlVGFiSW5kZXgpO1xuICAgICAgICAgICAgaWYgKGNvbnRleHRzZWFyY2hfbXVsdGlNb2RlID09PSAnbXVsdGlBZnRlckxhc3RUYWInKSB7XG4gICAgICAgICAgICAgICAgdGFiUG9zaXRpb24gPSBsYXN0VGFiLmluZGV4ICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFiUG9zaXRpb24gPSBhY3RpdmVUYWJJbmRleCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaWQgPT09ICdtdWx0aXNlYXJjaCcpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzTXVsdGlUYWJTZWFyY2godGFiUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5TaWRlYmFyKSB7XG4gICAgICAgICAgICAgICAgc2VhcmNoVXNpbmcoaWQsIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5MYXN0VGFiKVxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYkluZGV4ID0gbGFzdFRhYi5pbmRleDtcbiAgICAgICAgICAgIHNlYXJjaFVzaW5nKGlkLCBhY3RpdmVUYWJJbmRleCArIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ25vdGlmeSc6XG4gICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uc0VuYWJsZWQpIG5vdGlmeShtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NldFNlbGVjdGlvbic6XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhgU2VsZWN0ZWQgdGV4dDogJHttZXNzYWdlLmRhdGF9YCk7XG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBtZXNzYWdlLmRhdGE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmVzZXQnOlxuICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzZXRUYXJnZXRVcmwnOlxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGF0YSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFVybCA9IG1lc3NhZ2UuZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0ZXN0U2VhcmNoRW5naW5lJzpcbiAgICAgICAgICAgIHRlc3RTZWFyY2hFbmdpbmUobWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzYXZlU2VhcmNoRW5naW5lcyc6XG4gICAgICAgICAgICBzZWFyY2hFbmdpbmVzID0gc29ydEJ5SW5kZXgobWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKHNlYXJjaEVuZ2luZXMpO1xuICAgICAgICAgICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmNsZWFyKCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNsZWFyIGxvY2FsIHN0b3JhZ2UuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBzYXZlU2VhcmNoRW5naW5lc1RvTG9jYWxTdG9yYWdlKGZhbHNlKTtcbiAgICAgICAgICAgIHJlYnVpbGRDb250ZXh0TWVudSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2FkZE5ld1NlYXJjaEVuZ2luZSc6XG4gICAgICAgICAgICBpZCA9IG1lc3NhZ2UuZGF0YS5pZDtcbiAgICAgICAgICAgIGRvbWFpbiA9IGdldERvbWFpbihtZXNzYWdlLmRhdGEuc2VhcmNoRW5naW5lLnVybCk7XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhpZCwgZG9tYWluKTtcbiAgICAgICAgICAgIHNlYXJjaEVuZ2luZXNbaWRdID0gbWVzc2FnZS5kYXRhLnNlYXJjaEVuZ2luZTtcbiAgICAgICAgICAgIHNlYXJjaEVuZ2luZXMgPSBzb3J0QnlJbmRleChzZWFyY2hFbmdpbmVzKTtcbiAgICAgICAgICAgIGF3YWl0IGFkZE5ld1NlYXJjaEVuZ2luZShpZCwgZG9tYWluKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd1cGRhdGVTZWFyY2hPcHRpb25zJzpcbiAgICAgICAgICAgIG9wdGlvbnMgPSBhd2FpdCBnZXRPcHRpb25zKCk7XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgIGBQcmVmZXJlbmNlcyByZXRyaWV2ZWQgZnJvbSBzeW5jIHN0b3JhZ2U6ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucyl9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLmV4YWN0TWF0Y2ggPSBtZXNzYWdlLmRhdGEuZXhhY3RNYXRjaDtcbiAgICAgICAgICAgIHNldEV4YWN0TWF0Y2gob3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCBzYXZlT3B0aW9ucyhvcHRpb25zLCB0cnVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd1cGRhdGVEaXNwbGF5RmF2aWNvbnMnOlxuICAgICAgICAgICAgb3B0aW9ucyA9IGF3YWl0IGdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgYFByZWZlcmVuY2VzIHJldHJpZXZlZCBmcm9tIHN5bmMgc3RvcmFnZTogJHtKU09OLnN0cmluZ2lmeShvcHRpb25zKX1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMuZGlzcGxheUZhdmljb25zID0gbWVzc2FnZS5kYXRhLmRpc3BsYXlGYXZpY29ucztcbiAgICAgICAgICAgIHNldERpc3BsYXlGYXZpY29ucyhvcHRpb25zKTtcbiAgICAgICAgICAgIGF3YWl0IHNhdmVPcHRpb25zKG9wdGlvbnMsIHRydWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3VwZGF0ZURpc2FibGVBbHRDbGljayc6XG4gICAgICAgICAgICBvcHRpb25zID0gYXdhaXQgZ2V0T3B0aW9ucygpO1xuICAgICAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICBgUHJlZmVyZW5jZXMgcmV0cmlldmVkIGZyb20gc3luYyBzdG9yYWdlOiAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMpfWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5kaXNhYmxlQWx0Q2xpY2sgPSBtZXNzYWdlLmRhdGEuZGlzYWJsZUFsdENsaWNrO1xuICAgICAgICAgICAgc2V0RGlzYWJsZUFsdENsaWNrKG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgc2F2ZU9wdGlvbnMob3B0aW9ucywgZmFsc2UpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3VwZGF0ZVRhYk1vZGUnOlxuICAgICAgICAgICAgb3B0aW9ucyA9IGF3YWl0IGdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgYFByZWZlcmVuY2VzIHJldHJpZXZlZCBmcm9tIHN5bmMgc3RvcmFnZTogJHtKU09OLnN0cmluZ2lmeShvcHRpb25zKX1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMudGFiTW9kZSA9IG1lc3NhZ2UuZGF0YS50YWJNb2RlO1xuICAgICAgICAgICAgb3B0aW9ucy50YWJBY3RpdmUgPSBtZXNzYWdlLmRhdGEudGFiQWN0aXZlO1xuICAgICAgICAgICAgb3B0aW9ucy5sYXN0VGFiID0gbWVzc2FnZS5kYXRhLmxhc3RUYWI7XG4gICAgICAgICAgICBvcHRpb25zLnByaXZhdGVNb2RlID0gbWVzc2FnZS5kYXRhLnByaXZhdGVNb2RlO1xuICAgICAgICAgICAgc2V0VGFiTW9kZShvcHRpb25zKTtcbiAgICAgICAgICAgIGF3YWl0IHNhdmVPcHRpb25zKG9wdGlvbnMsIGZhbHNlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd1cGRhdGVNdWx0aU1vZGUnOlxuICAgICAgICAgICAgb3B0aW9ucyA9IGF3YWl0IGdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgYFByZWZlcmVuY2VzIHJldHJpZXZlZCBmcm9tIHN5bmMgc3RvcmFnZTogJHtKU09OLnN0cmluZ2lmeShvcHRpb25zKX1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMubXVsdGlNb2RlID0gbWVzc2FnZS5kYXRhLm11bHRpTW9kZTtcbiAgICAgICAgICAgIHNldE11bHRpTW9kZShvcHRpb25zKTtcbiAgICAgICAgICAgIGF3YWl0IHNhdmVPcHRpb25zKG9wdGlvbnMsIGZhbHNlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd1cGRhdGVPcHRpb25zTWVudUxvY2F0aW9uJzpcbiAgICAgICAgICAgIG9wdGlvbnMgPSBhd2FpdCBnZXRPcHRpb25zKCk7XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgIGBQcmVmZXJlbmNlcyByZXRyaWV2ZWQgZnJvbSBzeW5jIHN0b3JhZ2U6ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucyl9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLm9wdGlvbnNNZW51TG9jYXRpb24gPSBtZXNzYWdlLmRhdGEub3B0aW9uc01lbnVMb2NhdGlvbjtcbiAgICAgICAgICAgIHNldE9wdGlvbnNNZW51TG9jYXRpb24ob3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCBzYXZlT3B0aW9ucyhvcHRpb25zLCB0cnVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd1cGRhdGVTaXRlU2VhcmNoU2V0dGluZyc6XG4gICAgICAgICAgICBvcHRpb25zID0gYXdhaXQgZ2V0T3B0aW9ucygpO1xuICAgICAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICBgUHJlZmVyZW5jZXMgcmV0cmlldmVkIGZyb20gc3luYyBzdG9yYWdlOiAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMpfWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5zaXRlU2VhcmNoID0gbWVzc2FnZS5kYXRhLnNpdGVTZWFyY2g7XG4gICAgICAgICAgICBvcHRpb25zLnNpdGVTZWFyY2hVcmwgPSBtZXNzYWdlLmRhdGEuc2l0ZVNlYXJjaFVybDtcbiAgICAgICAgICAgIHNldFNpdGVTZWFyY2hTZXR0aW5nKG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgc2F2ZU9wdGlvbnMob3B0aW9ucywgdHJ1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndXBkYXRlUmVzZXRPcHRpb25zJzpcbiAgICAgICAgICAgIG9wdGlvbnMgPSBhd2FpdCBnZXRPcHRpb25zKCk7XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1ByZWZlcmVuY2VzIHJldHJpZXZlZCBmcm9tIHN5bmMgc3RvcmFnZTonKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMuZm9yY2VTZWFyY2hFbmdpbmVzUmVsb2FkID1cbiAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEucmVzZXRPcHRpb25zLmZvcmNlU2VhcmNoRW5naW5lc1JlbG9hZDtcbiAgICAgICAgICAgIG9wdGlvbnMucmVzZXRQcmVmZXJlbmNlcyA9IG1lc3NhZ2UuZGF0YS5yZXNldE9wdGlvbnMucmVzZXRQcmVmZXJlbmNlcztcbiAgICAgICAgICAgIG9wdGlvbnMuZm9yY2VGYXZpY29uc1JlbG9hZCA9XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5kYXRhLnJlc2V0T3B0aW9ucy5mb3JjZUZhdmljb25zUmVsb2FkO1xuICAgICAgICAgICAgc2V0UmVzZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgc2F2ZU9wdGlvbnMob3B0aW9ucywgZmFsc2UpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3VwZGF0ZVVzZVJlZ2V4JzpcbiAgICAgICAgICAgIG9wdGlvbnMgPSBhd2FpdCBnZXRPcHRpb25zKCk7XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgIGBQcmVmZXJlbmNlcyByZXRyaWV2ZWQgZnJvbSBzeW5jIHN0b3JhZ2U6ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucyl9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLnVzZVJlZ2V4ID0gbWVzc2FnZS5kYXRhLnVzZVJlZ2V4O1xuICAgICAgICAgICAgc2V0VXNlUmVnZXgob3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCBzYXZlT3B0aW9ucyhvcHRpb25zLCB0cnVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzYXZlU2VhcmNoRW5naW5lc1RvRGlzayc6XG4gICAgICAgICAgICBicm93c2VyLmRvd25sb2Fkcy5kb3dubG9hZCh7XG4gICAgICAgICAgICAgICAgdXJsOiBtZXNzYWdlLmRhdGEsXG4gICAgICAgICAgICAgICAgc2F2ZUFzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAnc2VhcmNoRW5naW5lcy5qc29uJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2hpZGVQYWdlQWN0aW9uJzpcbiAgICAgICAgICAgIGJyb3dzZXIucGFnZUFjdGlvbi5oaWRlKHNlbmRlci50YWIuaWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Nob3dQYWdlQWN0aW9uJzpcbiAgICAgICAgICAgIGJyb3dzZXIucGFnZUFjdGlvbi5zaG93KHNlbmRlci50YWIuaWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59KTtcblxuLy8vIEluaXRpYWxpemUgZXh0ZW5zaW9uXG4vLyBJbml0aWFsaXplIHNlYXJjaCBlbmdpbmVzLCBvbmx5IHNldHRpbmcgdG8gZGVmYXVsdCBpZiBub3QgcHJldmlvdXNseSBzZXRcbi8vIENoZWNrIGlmIG9wdGlvbnMgYXJlIHNldCBpbiBzeW5jIHN0b3JhZ2UgYW5kIHNldCB0byBkZWZhdWx0IGlmIG5vdFxuYXN5bmMgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAvLyBEZWJ1ZzogdmVyaWZ5IHRoYXQgc3RvcmFnZSBzcGFjZSBvY2N1cGllZCBpcyB3aXRoaW4gbGltaXRzXG4gICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICAvLyBJbmZvcm0gb24gc3RvcmFnZSBzcGFjZSBiZWluZyB1c2VkIGJ5IHN0b3JhZ2Ugc3luY1xuICAgICAgICBjb25zdCBieXRlc1VzZWQgPSBhd2FpdCBicm93c2VyLnN0b3JhZ2Uuc3luY1xuICAgICAgICAgICAgLmdldEJ5dGVzSW5Vc2UobnVsbClcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gcmV0cmlldmUgc3RvcmFnZSBzcGFjZSB1c2VkIGJ5IHN0b3JhZ2Ugc3luYy4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyhgQnl0ZXMgdXNlZCBieSBzdG9yYWdlIHN5bmM6ICR7Ynl0ZXNVc2VkfSBieXRlcy5gKTtcblxuICAgICAgICAvLyBJbmZvcm0gb24gc3RvcmFnZSBzcGFjZSBiZWluZyB1c2VkIGJ5IGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuZ2V0KG51bGwpO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBCeXRlcyB1c2VkIGJ5IGxvY2FsIHN0b3JhZ2U6ICR7SlNPTi5zdHJpbmdpZnkoaXRlbXMpLmxlbmd0aH0gYnl0ZXMuYFxuICAgICAgICApO1xuICAgIH1cblxuICAgIG5vdGlmaWNhdGlvbnNFbmFibGVkID1cbiAgICAgICAgKGF3YWl0IG5hdmlnYXRvci5wZXJtaXNzaW9ucy5xdWVyeSh7IG5hbWU6ICdub3RpZmljYXRpb25zJyB9KSkuc3RhdGUgPT09XG4gICAgICAgICdncmFudGVkJztcblxuICAgIC8vIEZldGNoIENPUlMgQVBJIFVSTCBhbmQga2V5IGZyb20gY29uZmlnIGZpbGVcbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCBmZXRjaENvbmZpZygpO1xuICAgIENPUlNfQVBJX1VSTCA9IGNvbmZpZy5BUElfVVJMO1xuICAgIENPUlNfQVBJX0tFWSA9IGNvbmZpZy5BUElfS0VZO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBvcHRpb25zIGFuZCBzZWFyY2ggZW5naW5lc1xuICAgIGF3YWl0IGluaXRpYWxpc2VPcHRpb25zQW5kU2VhcmNoRW5naW5lcyhmYWxzZSk7XG4gICAgcmVidWlsZENvbnRleHRNZW51KCk7XG59XG5cbi8vLyBSZXNldCBleHRlbnNpb25cbi8vIFJlc2V0cyB0aGUgb3B0aW9ucyB0byB0aGUgZGVmYXVsdCBsaXN0IGlmIG9wdGlvbnMucmVzZXRQcmVmZXJlbmNlcyBpcyBzZXRcbi8vIFJlc2V0cyB0aGUgbGlzdCBvZiBzZWFyY2ggZW5naW5lcyB0byB0aGUgZGVmYXVsdCBsaXN0IGlmIG9wdGlvbnMuZm9yY2VTZWFyY2hFbmdpbmVzUmVsb2FkIGlzIHNldFxuLy8gRm9yY2UgZmF2aWNvbnMgdG8gYmUgcmVsb2FkZWQgaWYgb3B0aW9ucy5mb3JjZUZhdmljb25zUmVsb2FkIGlzIHNldFxuYXN5bmMgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIFwiUmVzZXR0aW5nIGV4dGVuc2lvbidzIHByZWZlcmVuY2VzIGFuZCBzZWFyY2ggZW5naW5lcyBhcyBwZXIgdXNlciByZXNldCBwcmVmZXJlbmNlcy5cIlxuICAgICAgICApO1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgYnJvd3Nlci5zdG9yYWdlLnN5bmMuZ2V0KG51bGwpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byByZXRyaWV2ZSBvcHRpb25zIGZyb20gc3RvcmFnZSBzeW5jLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0gZGF0YS5vcHRpb25zO1xuICAgIGNvbnN0IGZvcmNlUmVsb2FkID0gb3B0aW9ucy5mb3JjZVNlYXJjaEVuZ2luZXNSZWxvYWQ7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coYE9wdGlvbnM6YCk7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2cob3B0aW9ucyk7XG4gICAgYXdhaXQgaW5pdGlhbGlzZU9wdGlvbnNBbmRTZWFyY2hFbmdpbmVzKGZvcmNlUmVsb2FkKTtcbiAgICByZWJ1aWxkQ29udGV4dE1lbnUoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gYWRkTmV3U2VhcmNoRW5naW5lKGlkLCBkb21haW4pIHtcbiAgICBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuY2xlYXIoKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gY2xlYXIgbG9jYWwgc3RvcmFnZS4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfSk7XG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCBnZXROZXdGYXZpY29uKGlkLCBkb21haW4pO1xuICAgIHNlYXJjaEVuZ2luZXNbaWRdWydiYXNlNjQnXSA9IHZhbHVlLmJhc2U2NDtcbiAgICBhd2FpdCBzYXZlU2VhcmNoRW5naW5lc1RvTG9jYWxTdG9yYWdlKGZhbHNlKTtcbiAgICByZWJ1aWxkQ29udGV4dE1lbnUoKTtcbiAgICBpZiAobm90aWZpY2F0aW9uc0VuYWJsZWQpIG5vdGlmeShub3RpZnlTZWFyY2hFbmdpbmVBZGRlZCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVBhZ2VBY3Rpb24odGFiKSB7XG4gICAgbGV0IG1lc3NhZ2UgPSB7IGFjdGlvbjogJ2dldFNlYXJjaEVuZ2luZScsIGRhdGE6ICcnIH07XG4gICAgc2VuZE1lc3NhZ2VUb1RhYih0YWIsIG1lc3NhZ2UpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXNlT3B0aW9uc0FuZFNlYXJjaEVuZ2luZXMoZm9yY2VSZWxvYWQpIHtcbiAgICAvLy8gSW5pdGlhbGlzZSBvcHRpb25zXG4gICAgbGV0IG9wdGlvbnMgPSB7fTtcbiAgICBsZXQgZGF0YSA9IGF3YWl0IGJyb3dzZXIuc3RvcmFnZS5zeW5jLmdldChudWxsKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gcmV0cmlldmUgZGF0YSBmcm9tIHN0b3JhZ2Ugc3luYy4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGRhdGEub3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gZGF0YS5vcHRpb25zO1xuICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhvcHRpb25zKTtcbiAgICAgICAgZGVsZXRlIGRhdGFbJ29wdGlvbnMnXTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gb3B0aW9ucyBzdG9yZWQgaW4gc3RvcmFnZSBzeW5jIG9yIHJlc2V0IHByZWZlcmVuY2VzIGlzIHNldCwgdGhlbiB1c2UgZGVmYXVsdCBvcHRpb25zXG4gICAgLy8gT3RoZXJ3aXNlIGNsZWFyIHN0b3JhZ2Ugc3luYyBhbmQgb25seSBzYXZlIG9wdGlvbnMgaW4gc3RvcmFnZSBzeW5jXG4gICAgaWYgKGlzRW1wdHkob3B0aW9ucykgfHwgb3B0aW9ucy5yZXNldFByZWZlcmVuY2VzKSB7XG4gICAgICAgIG9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucztcbiAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBicm93c2VyLnN0b3JhZ2Uuc3luYy5jbGVhcigpO1xuICAgIH1cbiAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhvcHRpb25zKTtcbiAgICBhd2FpdCBzZXRPcHRpb25zKG9wdGlvbnMsIHRydWUpO1xuXG4gICAgLy8vIEluaXRpYWxpc2Ugc2VhcmNoIGVuZ2luZXNcbiAgICAvLyBJZiB0aGVyZSB3ZXJlIHNlYXJjaCBlbmdpbmVzIHN0b3JlZCBpbiBzdG9yYWdlIHN5bmMgKGxlZ2FjeSksIG1vdmUgdGhlbSB0byBzdG9yYWdlIGxvY2FsXG4gICAgaWYgKCFpc0VtcHR5KGRhdGEpICYmIE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgc2VhcmNoRW5naW5lcyA9IHNvcnRCeUluZGV4KGRhdGEpO1xuICAgICAgICBzZXRSZWdleCgpO1xuICAgICAgICBzZXRLZXlib2FyZFNob3J0Y3V0cygpO1xuICAgICAgICBpZiAobG9nVG9Db25zb2xlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2VhcmNoIGVuZ2luZXM6IFxcbicpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2VhcmNoRW5naW5lcyk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmNsZWFyKCk7XG4gICAgICAgIGF3YWl0IGdldEZhdmljb25zQXNCYXNlNjRTdHJpbmdzKCk7XG4gICAgICAgIGF3YWl0IHNhdmVTZWFyY2hFbmdpbmVzVG9Mb2NhbFN0b3JhZ2UoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENoZWNrIGZvciBzZWFyY2ggZW5naW5lcyBpbiBsb2NhbCBzdG9yYWdlXG4gICAgICAgIGNvbnN0IHNlID0gYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmdldChudWxsKTtcbiAgICAgICAgaWYgKHNlID09PSB1bmRlZmluZWQgfHwgaXNFbXB0eShzZSkgfHwgZm9yY2VSZWxvYWQpIHtcbiAgICAgICAgICAgIC8vIExvYWQgZGVmYXVsdCBzZWFyY2ggZW5naW5lcyBpZiBmb3JjZSByZWxvYWQgaXMgc2V0IG9yIGlmIG5vIHNlYXJjaCBlbmdpbmVzIGFyZSBzdG9yZWQgaW4gbG9jYWwgc3RvcmFnZVxuICAgICAgICAgICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmNsZWFyKCk7XG4gICAgICAgICAgICBhd2FpdCBsb2FkRGVmYXVsdFNlYXJjaEVuZ2luZXMoREVGQVVMVF9TRUFSQ0hfRU5HSU5FUykuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIHJldHJpZXZlIHNlYXJjaCBlbmdpbmVlcyBmcm9tIGxvY2FsIHN0b3JhZ2UuJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlYXJjaEVuZ2luZXMgPSBzb3J0QnlJbmRleChzZSk7XG4gICAgICAgICAgICBzZXRSZWdleCgpO1xuICAgICAgICAgICAgc2V0S2V5Ym9hcmRTaG9ydGN1dHMoKTtcbiAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VhcmNoIGVuZ2luZXM6IFxcbicpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlYXJjaEVuZ2luZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRSZWdleCgpIHtcbiAgICBmb3IgKGxldCBpZCBpbiBzZWFyY2hFbmdpbmVzKSB7XG4gICAgICAgIGlmIChzZWFyY2hFbmdpbmVzW2lkXS5yZWdleCAhPT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coYGlkOiAke2lkfWApO1xuICAgICAgICBzZWFyY2hFbmdpbmVzW2lkXVsncmVnZXgnXSA9IHt9O1xuICAgICAgICBzZWFyY2hFbmdpbmVzW2lkXVsncmVnZXgnXVsnYm9keSddID0gZGVmYXVsdFJlZ2V4LnNvdXJjZTtcbiAgICAgICAgc2VhcmNoRW5naW5lc1tpZF1bJ3JlZ2V4J11bJ2ZsYWdzJ10gPSBkZWZhdWx0UmVnZXguZmxhZ3M7XG4gICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKHNlYXJjaEVuZ2luZXNbaWRdLnJlZ2V4KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldEtleWJvYXJkU2hvcnRjdXRzKCkge1xuICAgIGZvciAobGV0IGlkIGluIHNlYXJjaEVuZ2luZXMpIHtcbiAgICAgICAgaWYgKHNlYXJjaEVuZ2luZXNbaWRdLmtleWJvYXJkU2hvcnRjdXQgIT09IHVuZGVmaW5lZCkgY29udGludWU7XG4gICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKGBpZDogJHtpZH1gKTtcbiAgICAgICAgc2VhcmNoRW5naW5lc1tpZF1bJ2tleWJvYXJkU2hvcnRjdXQnXSA9ICcnO1xuICAgICAgICBpZiAobG9nVG9Db25zb2xlKVxuICAgICAgICAgICAgY29uc29sZS5sb2coYGtleWJvYXJkIHNob3J0Y3V0OiAke3NlYXJjaEVuZ2luZXNbaWRdLmtleWJvYXJkU2hvcnRjdXR9YCk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRPcHRpb25zKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBicm93c2VyLnN0b3JhZ2Uuc3luYy5nZXQobnVsbCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBpZiAobG9nVG9Db25zb2xlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIHJldHJpZXZlIG9wdGlvbnMgZnJvbSBzeW5jIHN0b3JhZ2UuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVycjtcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0gZGF0YS5vcHRpb25zO1xuICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKG9wdGlvbnMpO1xuICAgIHJldHVybiBvcHRpb25zO1xufVxuXG4vLyBTZXRzIHRoZSBkZWZhdWx0IG9wdGlvbnMgaWYgdGhleSBoYXZlbid0IGFscmVhZHkgYmVlbiBzZXQgaW4gbG9jYWwgc3RvcmFnZSBhbmQgc2F2ZXMgdGhlbVxuLy8gVGhlIGNvbnRleHQgbWVudSBpcyBhbHNvIHJlYnVpbHQgd2hlbiByZXF1aXJlZFxuYXN5bmMgZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zLCBzYXZlKSB7XG4gICAgc2V0RXhhY3RNYXRjaChvcHRpb25zKTtcbiAgICBzZXRUYWJNb2RlKG9wdGlvbnMpO1xuICAgIHNldE9wdGlvbnNNZW51TG9jYXRpb24ob3B0aW9ucyk7IC8vIGNvbnRleHQgbWVudSB3aWxsIGhhdmUgdG8gYmUgcmVidWlsdFxuICAgIHNldERpc3BsYXlGYXZpY29ucyhvcHRpb25zKTsgLy8gY29udGV4dCBtZW51IHdpbGwgaGF2ZSB0byBiZSByZWJ1aWx0XG4gICAgc2V0RGlzcGxheUV4aWZTdW1tYXJ5KG9wdGlvbnMpO1xuICAgIHNldERpc2FibGVBbHRDbGljayhvcHRpb25zKTtcbiAgICBzZXRSZXNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgc2V0U2l0ZVNlYXJjaFNldHRpbmcob3B0aW9ucyk7XG4gICAgc2V0VXNlUmVnZXgob3B0aW9ucyk7XG4gICAgc2V0TXVsdGlNb2RlKG9wdGlvbnMpO1xuICAgIGlmIChzYXZlKSB7XG4gICAgICAgIGF3YWl0IGJyb3dzZXIuc3RvcmFnZS5zeW5jLmNsZWFyKCk7XG4gICAgICAgIGF3YWl0IHNhdmVPcHRpb25zKG9wdGlvbnMsIHRydWUpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc2F2ZU9wdGlvbnMob3B0aW9ucywgYmxuUmVidWlsZENvbnRleHRNZW51KSB7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICBjb25zdCBzdHJPcHRpb25zID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBPcHRpb25zIHNldHRpbmdzOlxcbiR7c3RyT3B0aW9uc31gKTtcbiAgICB9XG4gICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLnN5bmMuc2V0KHsgb3B0aW9uczogb3B0aW9ucyB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gc2F2ZSBvcHRpb25zIHRvIHN0b3JhZ2Ugc3luYy4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChibG5SZWJ1aWxkQ29udGV4dE1lbnUpIHJlYnVpbGRDb250ZXh0TWVudSgpO1xuICAgIGlmIChsb2dUb0NvbnNvbGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBzYXZlZCB0aGUgb3B0aW9ucyB0byBzdG9yYWdlIHN5bmMuJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRFeGFjdE1hdGNoKG9wdGlvbnMpIHtcbiAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhgU2V0dGluZyBleGFjdCBtYXRjaCB0byAke29wdGlvbnMuZXhhY3RNYXRjaH1gKTtcbiAgICBjb250ZXh0c2VhcmNoX2V4YWN0TWF0Y2ggPSBvcHRpb25zLmV4YWN0TWF0Y2g7XG59XG5cbi8vIFN0b3JlIHRoZSBkZWZhdWx0IHZhbHVlcyBmb3IgdGFiIG1vZGUgaW4gc3RvcmFnZSBsb2NhbFxuZnVuY3Rpb24gc2V0VGFiTW9kZShvcHRpb25zKSB7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coJ1NldHRpbmcgdGFiIG1vZGUuLicpO1xuICAgIGNvbnRleHRzZWFyY2hfbWFrZU5ld1RhYk9yV2luZG93QWN0aXZlID0gb3B0aW9ucy50YWJBY3RpdmU7XG4gICAgY29udGV4dHNlYXJjaF9vcGVuU2VhcmNoUmVzdWx0c0luTGFzdFRhYiA9IG9wdGlvbnMubGFzdFRhYjtcbiAgICBjb250ZXh0c2VhcmNoX3ByaXZhdGVNb2RlID0gb3B0aW9ucy5wcml2YXRlTW9kZTtcbiAgICBzd2l0Y2ggKG9wdGlvbnMudGFiTW9kZSkge1xuICAgICAgICBjYXNlICdvcGVuTmV3VGFiJzpcbiAgICAgICAgICAgIGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJbk5ld1RhYiA9IHRydWU7XG4gICAgICAgICAgICBjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5OZXdXaW5kb3cgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJblNpZGViYXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzYW1lVGFiJzpcbiAgICAgICAgICAgIGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJbk5ld1RhYiA9IGZhbHNlO1xuICAgICAgICAgICAgY29udGV4dHNlYXJjaF9vcGVuU2VhcmNoUmVzdWx0c0luTmV3V2luZG93ID0gZmFsc2U7XG4gICAgICAgICAgICBjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5TaWRlYmFyID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnb3Blbk5ld1dpbmRvdyc6XG4gICAgICAgICAgICBjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5OZXdXaW5kb3cgPSB0cnVlO1xuICAgICAgICAgICAgY29udGV4dHNlYXJjaF9vcGVuU2VhcmNoUmVzdWx0c0luTmV3VGFiID0gZmFsc2U7XG4gICAgICAgICAgICBjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5TaWRlYmFyID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnb3BlblNpZGViYXInOlxuICAgICAgICAgICAgY29udGV4dHNlYXJjaF9vcGVuU2VhcmNoUmVzdWx0c0luU2lkZWJhciA9IHRydWU7XG4gICAgICAgICAgICBjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5OZXdUYWIgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJbk5ld1dpbmRvdyA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldE11bHRpTW9kZShvcHRpb25zKSB7XG4gICAgY29udGV4dHNlYXJjaF9tdWx0aU1vZGUgPSBvcHRpb25zLm11bHRpTW9kZTtcbn1cblxuZnVuY3Rpb24gc2V0T3B0aW9uc01lbnVMb2NhdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBTZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiBvcHRpb25zIGluIHRoZSBjb250ZXh0IG1lbnUgdG8gJHtvcHRpb25zLm9wdGlvbnNNZW51TG9jYXRpb259YFxuICAgICAgICApO1xuICAgIH1cbiAgICBjb250ZXh0c2VhcmNoX29wdGlvbnNNZW51TG9jYXRpb24gPSBvcHRpb25zLm9wdGlvbnNNZW51TG9jYXRpb247XG59XG5cbmZ1bmN0aW9uIHNldERpc3BsYXlGYXZpY29ucyhvcHRpb25zKSB7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coJ1NldHRpbmcgZmF2aWNvbnMgcHJlZmVyZW5jZS4uJyk7XG4gICAgY29udGV4dHNlYXJjaF9kaXNwbGF5RmF2aWNvbnMgPSBvcHRpb25zLmRpc3BsYXlGYXZpY29ucztcbn1cblxuZnVuY3Rpb24gc2V0RGlzcGxheUV4aWZTdW1tYXJ5KG9wdGlvbnMpIHtcbiAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZygnU2V0dGluZyBkaXNwbGF5IEVYSUYgc3VtbWFyeSBwcmVmZXJlbmNlLi4nKTtcbiAgICBjb250ZXh0c2VhcmNoX2Rpc3BsYXlFeGlmU3VtbWFyeSA9IG9wdGlvbnMuZGlzcGxheUV4aWZTdW1tYXJ5O1xufVxuXG5mdW5jdGlvbiBzZXREaXNhYmxlQWx0Q2xpY2sob3B0aW9ucykge1xuICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKCdTZXR0aW5nIG9wdGlvbiB0byBkaXNhYmxlIEFsdC1DbGljay4uJyk7XG4gICAgY29udGV4dHNlYXJjaF9kaXNhYmxlQWx0Q2xpY2sgPSBvcHRpb25zLmRpc2FibGVBbHRDbGljaztcbn1cblxuZnVuY3Rpb24gc2V0U2l0ZVNlYXJjaFNldHRpbmcob3B0aW9ucykge1xuICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKCdTZXR0aW5nIHNpdGUgc2VhcmNoIG9wdGlvbi4uJyk7XG4gICAgY29udGV4dHNlYXJjaF9zaXRlU2VhcmNoID0gb3B0aW9ucy5zaXRlU2VhcmNoO1xuICAgIGNvbnRleHRzZWFyY2hfc2l0ZVNlYXJjaFVybCA9IG9wdGlvbnMuc2l0ZVNlYXJjaFVybDtcbn1cblxuZnVuY3Rpb24gc2V0UmVzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhgU2V0dGluZyByZXNldCBvcHRpb25zLi5gKTtcbiAgICBjb250ZXh0c2VhcmNoX2ZvcmNlU2VhcmNoRW5naW5lc1JlbG9hZCA9IG9wdGlvbnMuZm9yY2VTZWFyY2hFbmdpbmVzUmVsb2FkO1xuICAgIGNvbnRleHRzZWFyY2hfcmVzZXRQcmVmZXJlbmNlcyA9IG9wdGlvbnMucmVzZXRQcmVmZXJlbmNlcztcbiAgICBjb250ZXh0c2VhcmNoX2ZvcmNlRmF2aWNvbnNSZWxvYWQgPSBvcHRpb25zLmZvcmNlRmF2aWNvbnNSZWxvYWQ7XG59XG5cbmZ1bmN0aW9uIHNldFVzZVJlZ2V4KG9wdGlvbnMpIHtcbiAgICBpZiAobG9nVG9Db25zb2xlKVxuICAgICAgICBjb25zb2xlLmxvZyhgU2V0dGluZyB3aGV0aGVyIHRvIHVzZSByZWd1bGFyIGV4cHJlc3Npb25zLi4uYCk7XG4gICAgY29udGV4dHNlYXJjaF91c2VSZWdleCA9IG9wdGlvbnMudXNlUmVnZXg7XG59XG5cbi8vLyBMb2FkIGRlZmF1bHQgbGlzdCBvZiBzZWFyY2ggZW5naW5lc1xuYXN5bmMgZnVuY3Rpb24gbG9hZERlZmF1bHRTZWFyY2hFbmdpbmVzKGpzb25GaWxlKSB7XG4gICAgbGV0IHJlcUhlYWRlciA9IG5ldyBIZWFkZXJzKCk7XG4gICAgcmVxSGVhZGVyLmFwcGVuZCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICBjb25zdCBpbml0T2JqZWN0ID0ge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiByZXFIZWFkZXIsXG4gICAgfTtcbiAgICBsZXQgdXNlclJlcXVlc3QgPSBuZXcgUmVxdWVzdChqc29uRmlsZSwgaW5pdE9iamVjdCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1c2VyUmVxdWVzdCk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgVGhlIHNlYXJjaCBlbmdpbmVzIGNvdWxkIG5vdCBiZSBsb2FkZWQuIEFuIGVycm9yIGhhcyBvY2N1cmVkOiAke3Jlc3BvbnNlLnN0YXR1c31gO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHNlYXJjaEVuZ2luZXMgPSBzb3J0QnlJbmRleChqc29uKTtcbiAgICAgICAgc2V0UmVnZXgoKTtcbiAgICAgICAgc2V0S2V5Ym9hcmRTaG9ydGN1dHMoKTtcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlYXJjaCBlbmdpbmVzOlxcbicpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2VhcmNoRW5naW5lcyk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmNsZWFyKCk7XG4gICAgICAgIGF3YWl0IGdldEZhdmljb25zQXNCYXNlNjRTdHJpbmdzKCk7XG4gICAgICAgIGF3YWl0IHNhdmVTZWFyY2hFbmdpbmVzVG9Mb2NhbFN0b3JhZ2UodHJ1ZSk7XG4gICAgICAgIHJlYnVpbGRDb250ZXh0TWVudSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUuZXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzYXZlU2VhcmNoRW5naW5lc1RvTG9jYWxTdG9yYWdlKGJsbk5vdGlmeSkge1xuICAgIHNlYXJjaEVuZ2luZXMgPSBzb3J0QnlJbmRleChzZWFyY2hFbmdpbmVzKTtcbiAgICBpZiAobG9nVG9Db25zb2xlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTZWFyY2ggZW5naW5lczpcXG4nKTtcbiAgICAgICAgY29uc29sZS5sb2coc2VhcmNoRW5naW5lcyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gc2F2ZSBsaXN0IG9mIHNlYXJjaCBlbmdpbmVzIHRvIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldChzZWFyY2hFbmdpbmVzKTtcbiAgICAgICAgaWYgKG5vdGlmaWNhdGlvbnNFbmFibGVkICYmIGJsbk5vdGlmeSkgbm90aWZ5KG5vdGlmeVNlYXJjaEVuZ2luZXNMb2FkZWQpO1xuICAgICAgICBpZiAobG9nVG9Db25zb2xlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAnU2VhcmNoIGVuZ2luZXMgaGF2ZSBiZWVuIHN1Y2Nlc3NmdWxseSBzYXZlZCB0byBsb2NhbCBzdG9yYWdlLidcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAobG9nVG9Db25zb2xlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBzYXZlIHRoZSBzZWFyY2ggZW5naW5lcyB0byBsb2NhbCBzdG9yYWdlLicpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLy8gR2V0IGFuZCBzdG9yZSBmYXZpY29uIHVybHMgYW5kIGJhc2U2NCBpbWFnZXNcbmFzeW5jIGZ1bmN0aW9uIGdldEZhdmljb25zQXNCYXNlNjRTdHJpbmdzKCkge1xuICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKCdGZXRjaGluZyBmYXZpY29ucy4uJyk7XG4gICAgbGV0IGFycmF5T2ZQcm9taXNlcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaWQgaW4gc2VhcmNoRW5naW5lcykge1xuICAgICAgICAvLyBGZXRjaCBhIG5ldyBmYXZpY29uIG9ubHkgaWYgdGhlcmUgaXMgbm8gZXhpc3RpbmcgZmF2aWNvbiBvciBpZiBhbiBpY29uIHJlbG9hZCBpcyBiZWluZyBmb3JjZWRcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2VhcmNoRW5naW5lc1tpZF0uYmFzZTY0ID09PSBudWxsIHx8XG4gICAgICAgICAgICBzZWFyY2hFbmdpbmVzW2lkXS5iYXNlNjQgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgY29udGV4dHNlYXJjaF9mb3JjZUZhdmljb25zUmVsb2FkXG4gICAgICAgICkge1xuICAgICAgICAgICAgbGV0IHNlVXJsID0gc2VhcmNoRW5naW5lc1tpZF0udXJsO1xuICAgICAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coJ2lkOiAnICsgaWQpO1xuICAgICAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coJ3VybDogJyArIHNlVXJsKTtcbiAgICAgICAgICAgIGxldCBkb21haW4gPSBnZXREb21haW4oc2VVcmwpO1xuICAgICAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coJ0dldHRpbmcgZmF2aWNvbiBmb3IgJyArIGRvbWFpbik7XG4gICAgICAgICAgICBhcnJheU9mUHJvbWlzZXMucHVzaChhd2FpdCBnZXROZXdGYXZpY29uKGlkLCBkb21haW4pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhcnJheU9mUHJvbWlzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyB2YWx1ZXMgaXMgYW4gYXJyYXkgb2Yge2lkOiwgYmFzZTY0On1cbiAgICAgICAgY29uc3QgdmFsdWVzID0gYXdhaXQgUHJvbWlzZS5hbGwoYXJyYXlPZlByb21pc2VzKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOb3QgQUxMIHRoZSBmYXZjaW9ucyBjb3VsZCBiZSBmZXRjaGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coJ0FMTCBwcm9taXNlcyBoYXZlIGNvbXBsZXRlZC4nKTtcbiAgICAgICAgaWYgKHZhbHVlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaWQgaXMgJyArIHZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Jhc2U2NCBzdHJpbmcgaXMgJyArIHZhbHVlLmJhc2U2NCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VhcmNoRW5naW5lc1t2YWx1ZS5pZF1bJ2Jhc2U2NCddID0gdmFsdWUuYmFzZTY0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKCdUaGUgZmF2aWNvbnMgaGF2ZSBBTEwgYmVlbiBmZXRjaGVkLicpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0TmV3RmF2aWNvbihpZCwgZG9tYWluKSB7XG4gICAgY29uc3Qgb3B0aW1hbFNpemUgPSAnMzJ4MzInO1xuICAgIGNvbnN0IHRlc3RzID0gW29wdGltYWxTaXplLCAnWy5dcG5nJywgJ1suXWljbyddO1xuICAgIGxldCBsaW5rc1dpdGhJY29ucyA9IFtdO1xuICAgIGxldCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG4gICAgbGV0IGJlc3RJY29uVXJsID0gbnVsbDtcbiAgICBsZXQgcmVxSGVhZGVyID0gbmV3IEhlYWRlcnMoKTtcbiAgICByZXFIZWFkZXIuYXBwZW5kKCdDb250ZW50LVR5cGUnLCAndGV4dC9odG1sOyBjaGFyc2V0PVVURi04Jyk7XG4gICAgcmVxSGVhZGVyLmFwcGVuZCgneC1hcGkta2V5JywgQ09SU19BUElfS0VZKTtcbiAgICBjb25zdCBpbml0T2JqZWN0ID0ge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiByZXFIZWFkZXIsXG4gICAgfTtcbiAgICBjb25zdCB1c2VyUmVxdWVzdCA9IG5ldyBSZXF1ZXN0KENPUlNfQVBJX1VSTCArIGRvbWFpbiwgaW5pdE9iamVjdCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1c2VyUmVxdWVzdCk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgRmFpbGVkIHRvIGdldCBkb21haW4gb2Ygc2VhcmNoIGVuZ2luZS4gQW4gZXJyb3IgaGFzIG9jY3VyZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfWA7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICBjb25zdCB3ZWJQYWdlID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICBjb25zdCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHdlYlBhZ2UsICd0ZXh0L2h0bWwnKTtcbiAgICAgICAgY29uc3QgbGlua3MgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2xpbmsnKTtcblxuICAgICAgICAvLyBTdG9yZSBhbGwgbGlua3Mgd2l0aCBhIHBvc3NpYmxlIGZhdmljb24gaW4gYW4gYXJyYXlcbiAgICAgICAgZm9yIChsZXQgbGluayBvZiBsaW5rcykge1xuICAgICAgICAgICAgY29uc3QgcmVsID0gbGluay5nZXRBdHRyaWJ1dGUoJ3JlbCcpO1xuICAgICAgICAgICAgaWYgKC9pY29uL2kudGVzdChyZWwpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWJzVXJsID0gY29udmVydFVybDJBYnNVcmwobGluay5ocmVmLCBkb21haW4pO1xuICAgICAgICAgICAgICAgIGxpbmtzV2l0aEljb25zLnB1c2goYWJzVXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKGBEb21haW46ICR7ZG9tYWlufWApO1xuICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhgTGlua3Mgd2l0aCBmYXZpY29uczogJHtsaW5rc1dpdGhJY29uc31gKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgbGlua3MgY29udGFpbmluZyBpY29ucyBjb250YWluIDMyeDMyIGluIHRoZWlyIG5hbWUsIHRoZW5cbiAgICAgICAgLy8gY2hlY2sgaWYgdGhleSBhcmUgb2YgdHlwZSBwbmcuIEZpbmFsbHksIGNoZWNrIGlmIHRoZXkgYXJlIG9mIHR5cGUgaWNvLlxuICAgICAgICBmb3IgKGxldCB0ZXN0IG9mIHRlc3RzKSB7XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhgQ2hlY2tpbmcgaWYgdXJsIGNvbnRhaW5zOiAke3Rlc3R9YCk7XG4gICAgICAgICAgICBiZXN0SWNvblVybCA9IGdldEJlc3RJY29uVXJsKGxpbmtzV2l0aEljb25zLCB0ZXN0KTtcbiAgICAgICAgICAgIC8vIElmIGFuIGljb24gaXMgZm91bmQgY29udmVydCBpdCB0byBhIGJhc2U2NCBpbWFnZVxuICAgICAgICAgICAgaWYgKGJlc3RJY29uVXJsICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coYEJlc3QgaWNvbiB1cmw6ICR7YmVzdEljb25Vcmx9YCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0c3RyID0gYXdhaXQgZ2V0QmFzZTY0SW1hZ2UoYmVzdEljb25VcmwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGlkOiBpZCwgYmFzZTY0OiBiYXNlNjRzdHIgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZhaWxlZCB0byByZXRyaWV2ZSBhIGZhdmljb24sIHByb2NlZWRpbmcgd2l0aCBkZWZhdWx0IENTIGljb25cbiAgICAgICAgcmV0dXJuIHsgaWQ6IGlkLCBiYXNlNjQ6IGJhc2U2NENvbnRleHRTZWFyY2hJY29uIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coJ0ZhaWxlZCB0byByZXRyaWV2ZSBuZXcgZmF2aWNvbi4nKTtcbiAgICAgICAgcmV0dXJuIHsgaWQ6IGlkLCBiYXNlNjQ6IGJhc2U2NENvbnRleHRTZWFyY2hJY29uIH07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0VXJsMkFic1VybChocmVmLCBkb21haW4pIHtcbiAgICBsZXQgdXJsID0gaHJlZjtcbiAgICBsZXQgYWJzVXJsID0gZG9tYWluO1xuICAgIGxldCB1cmxQYXJ0cyA9IFtdO1xuXG4gICAgLy8gSWYgdGhlIHVybCBpcyBhYnNvbHV0ZSwgaS5lLiBiZWdpbnMgd2l0aGggZWl0aGVyJ2h0dHAnIG9yICdodHRwcycsIHRoZXJlJ3Mgbm90aGluZyB0byBkbyFcbiAgICBpZiAoL14oaHR0cHM/OlxcL1xcLykvLnRlc3QodXJsKSkgcmV0dXJuIHVybDtcblxuICAgIGlmICh1cmwuaW5jbHVkZXMoJ21vei1leHRlbnNpb246Ly8nKSkge1xuICAgICAgICBsZXQgaSA9IHVybC5sYXN0SW5kZXhPZignbW96LWV4dGVuc2lvbjovLycpICsgMTY7XG4gICAgICAgIHVybCA9IHVybC5zdWJzdHIoaSk7XG4gICAgICAgIHVybFBhcnRzID0gdXJsLnNwbGl0KC9cXC8vKTtcbiAgICAgICAgdXJsUGFydHMuc2hpZnQoKTtcbiAgICAgICAgZm9yIChsZXQgdXJsUGFydCBvZiB1cmxQYXJ0cykge1xuICAgICAgICAgICAgYWJzVXJsICs9ICcvJyArIHVybFBhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFic1VybDtcbiAgICB9XG5cbiAgICAvLyBJZiB1cmwgYmVnaW5zIHdpdGggJy8vJ1xuICAgIGlmICgvXihcXC9cXC8pLy50ZXN0KHVybCkpIHtcbiAgICAgICAgcmV0dXJuICdodHRwczonICsgdXJsO1xuICAgIH1cblxuICAgIC8vIElmIHVybCBpcyByZWxhdGl2ZS4uLlxuICAgIC8vIElmIHVybCBiZWdpbmdzIHdpdGggZWl0aGVyICcuLycgb3IgJy8nIChleGNsdWRpbmcgJy4vLycgb3IgJy8vJylcbiAgICBpZiAoL14oWy5dXFwvfFxcLylbXi9dLy50ZXN0KHVybCkpIHtcbiAgICAgICAgdXJsUGFydHMgPSB1cmwuc3BsaXQoL1xcLy8pO1xuICAgICAgICB1cmxQYXJ0cy5zaGlmdCgpO1xuICAgIH0gZWxzZSBpZiAoL15bXi9dLy50ZXN0KHVybCkpIHtcbiAgICAgICAgLy8gdXJsIGRvZXMgbm90IGJlZ2luIHdpdGggJy8nXG4gICAgICAgIHVybFBhcnRzID0gdXJsLnNwbGl0KC9cXC8vKTtcbiAgICB9XG4gICAgZm9yIChsZXQgdXJsUGFydCBvZiB1cmxQYXJ0cykge1xuICAgICAgICBhYnNVcmwgKz0gJy8nICsgdXJsUGFydDtcbiAgICB9XG4gICAgcmV0dXJuIGFic1VybDtcbn1cblxuZnVuY3Rpb24gZ2V0QmVzdEljb25VcmwodXJscywgcmVnZXgpIHtcbiAgICBsZXQgcmVnZXhwID0gbmV3IFJlZ0V4cChyZWdleCwgJ2knKTtcbiAgICBmb3IgKGxldCB1cmwgb2YgdXJscykge1xuICAgICAgICBpZiAocmVnZXhwLnRlc3QodXJsKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLy8vIEdlbmVyYXRlIGJhc2U2NCBpbWFnZSBzdHJpbmcgZm9yIHRoZSBmYXZpY29uIHdpdGggdGhlIGdpdmVuIHVybFxuYXN5bmMgZnVuY3Rpb24gZ2V0QmFzZTY0SW1hZ2UodXJsKSB7XG4gICAgbGV0IHJlcUhlYWRlciA9IG5ldyBIZWFkZXJzKCk7XG4gICAgcmVxSGVhZGVyLmFwcGVuZCgneC1hcGkta2V5JywgQ09SU19BUElfS0VZKTtcbiAgICBjb25zdCBpbml0T2JqZWN0ID0ge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiByZXFIZWFkZXJcbiAgICB9O1xuICAgIGNvbnN0IHVzZXJSZXF1ZXN0ID0gbmV3IFJlcXVlc3QoQ09SU19BUElfVVJMICsgdXJsLCBpbml0T2JqZWN0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVzZXJSZXF1ZXN0KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBGYWlsZWQgdG8gZmV0Y2ggdGhlIGZhdmljb24gaW1hZ2UuIEFuIGVycm9yIGhhcyBvY2N1cmVkOiAke3Jlc3BvbnNlLnN0YXR1c31gO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGI2NCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coYjY0KTtcbiAgICAgICAgcmV0dXJuIGI2NDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIGJhc2U2NENvbnRleHRTZWFyY2hJY29uO1xuICAgIH1cbn1cblxuLy8vIFJlYnVpbGQgdGhlIGNvbnRleHQgbWVudSB1c2luZyB0aGUgc2VhcmNoIGVuZ2luZXMgZnJvbSBsb2NhbCBzdG9yYWdlXG5mdW5jdGlvbiByZWJ1aWxkQ29udGV4dE1lbnUoKSB7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coJ1JlYnVpbGRpbmcgY29udGV4dCBtZW51Li4nKTtcbiAgICBicm93c2VyLnJ1bnRpbWUuZ2V0QnJvd3NlckluZm8oKS50aGVuKChpbmZvKSA9PiB7XG4gICAgICAgIGxldCB2ID0gaW5mby52ZXJzaW9uO1xuICAgICAgICBsZXQgYnJvd3NlclZlcnNpb24gPSBwYXJzZUludCh2LnNsaWNlKDAsIHYuc2VhcmNoKCcuJykgLSAxKSk7XG5cbiAgICAgICAgYnJvd3Nlci5jb250ZXh0TWVudXMucmVtb3ZlQWxsKCk7XG4gICAgICAgIGJyb3dzZXIuY29udGV4dE1lbnVzLm9uQ2xpY2tlZC5yZW1vdmVMaXN0ZW5lcihwcm9jZXNzU2VhcmNoKTtcblxuICAgICAgICBpZiAoY29udGV4dHNlYXJjaF9vcHRpb25zTWVudUxvY2F0aW9uID09PSAndG9wJykge1xuICAgICAgICAgICAgcmVidWlsZENvbnRleHRPcHRpb25zTWVudSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnVpbGRDb250ZXh0TWVudUZvckltYWdlcygpO1xuXG4gICAgICAgIHNlYXJjaEVuZ2luZXNBcnJheSA9IFtdO1xuICAgICAgICBsZXQgbiA9IE9iamVjdC5rZXlzKHNlYXJjaEVuZ2luZXMpLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuICsgMTsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpZCBpbiBzZWFyY2hFbmdpbmVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlYXJjaEVuZ2luZXNbaWRdLmluZGV4ID09PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiYXNlNjRTdHJpbmcgPSBzZWFyY2hFbmdpbmVzW2lkXS5iYXNlNjQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzdHJJbmRleCA9ICdjcy0nICsgaS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3RyVGl0bGUgPSBzZWFyY2hFbmdpbmVzW2lkXS5uYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaEVuZ2luZXNBcnJheS5wdXNoKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRDb250ZXh0TWVudUl0ZW0oXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hFbmdpbmVzW2lkXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ckluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyVGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlNjRTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyVmVyc2lvblxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250ZXh0c2VhcmNoX29wdGlvbnNNZW51TG9jYXRpb24gPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgICByZWJ1aWxkQ29udGV4dE9wdGlvbnNNZW51KCk7XG4gICAgICAgIH1cblxuICAgICAgICBicm93c2VyLmNvbnRleHRNZW51cy5vbkNsaWNrZWQuYWRkTGlzdGVuZXIocHJvY2Vzc1NlYXJjaCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYnVpbGRDb250ZXh0T3B0aW9uc01lbnUoKSB7XG4gICAgaWYgKGNvbnRleHRzZWFyY2hfb3B0aW9uc01lbnVMb2NhdGlvbiA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgYnJvd3Nlci5jb250ZXh0TWVudXMuY3JlYXRlKHtcbiAgICAgICAgICAgIGlkOiAnY3Mtc2VwYXJhdG9yJyxcbiAgICAgICAgICAgIHR5cGU6ICdzZXBhcmF0b3InLFxuICAgICAgICAgICAgY29udGV4dHM6IFsnc2VsZWN0aW9uJ10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBicm93c2VyLmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgICAgICBpZDogJ2NzLW1hdGNoJyxcbiAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgdGl0bGU6IHRpdGxlRXhhY3RNYXRjaCxcbiAgICAgICAgY29udGV4dHM6IFsnc2VsZWN0aW9uJ10sXG4gICAgICAgIGNoZWNrZWQ6IGNvbnRleHRzZWFyY2hfZXhhY3RNYXRjaCxcbiAgICB9KTtcbiAgICBicm93c2VyLmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgICAgICBpZDogJ2NzLW11bHRpdGFiJyxcbiAgICAgICAgdGl0bGU6IHRpdGxlTXVsdGlwbGVTZWFyY2hFbmdpbmVzLFxuICAgICAgICBjb250ZXh0czogWydzZWxlY3Rpb24nXSxcbiAgICB9KTtcbiAgICBicm93c2VyLmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgICAgICBpZDogJ2NzLXNpdGUtc2VhcmNoJyxcbiAgICAgICAgdGl0bGU6IGAke3RpdGxlU2l0ZVNlYXJjaH0gJHtjb250ZXh0c2VhcmNoX3NpdGVTZWFyY2h9YCxcbiAgICAgICAgY29udGV4dHM6IFsnc2VsZWN0aW9uJ10sXG4gICAgfSk7XG4gICAgYnJvd3Nlci5jb250ZXh0TWVudXMuY3JlYXRlKHtcbiAgICAgICAgaWQ6ICdjcy1vcHRpb25zJyxcbiAgICAgICAgdGl0bGU6IHRpdGxlT3B0aW9ucyArICcuLi4nLFxuICAgICAgICBjb250ZXh0czogWydzZWxlY3Rpb24nXSxcbiAgICB9KTtcbiAgICBpZiAoY29udGV4dHNlYXJjaF9vcHRpb25zTWVudUxvY2F0aW9uID09PSAndG9wJykge1xuICAgICAgICBicm93c2VyLmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgICAgICAgICAgaWQ6ICdjcy1zZXBhcmF0b3InLFxuICAgICAgICAgICAgdHlwZTogJ3NlcGFyYXRvcicsXG4gICAgICAgICAgICBjb250ZXh0czogWydzZWxlY3Rpb24nXSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLy8gQnVpbGQgdGhlIGNvbnRleHQgbWVudSBmb3IgaW1hZ2Ugc2VhcmNoZXNcbmZ1bmN0aW9uIGJ1aWxkQ29udGV4dE1lbnVGb3JJbWFnZXMoKSB7XG4gICAgYnJvd3Nlci5jb250ZXh0TWVudXMuY3JlYXRlKHtcbiAgICAgICAgaWQ6ICdjcy1yZXZlcnNlLWltYWdlLXNlYXJjaCcsXG4gICAgICAgIHRpdGxlOiAnR29vZ2xlIFJldmVyc2UgSW1hZ2UgU2VhcmNoJyxcbiAgICAgICAgY29udGV4dHM6IFsnaW1hZ2UnXSxcbiAgICB9KTtcbiAgICBicm93c2VyLmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgICAgICBpZDogJ2NzLWdvb2dsZS1sZW5zJyxcbiAgICAgICAgdGl0bGU6ICdHb29nbGUgTGVucycsXG4gICAgICAgIGNvbnRleHRzOiBbJ2ltYWdlJ10sXG4gICAgfSk7XG59XG5cbi8vLyBCdWlsZCBhIHNpbmdsZSBjb250ZXh0IG1lbnUgaXRlbVxuZnVuY3Rpb24gYnVpbGRDb250ZXh0TWVudUl0ZW0oXG4gICAgc2VhcmNoRW5naW5lLFxuICAgIGluZGV4LFxuICAgIHRpdGxlLFxuICAgIGJhc2U2NFN0cmluZyxcbiAgICBicm93c2VyVmVyc2lvblxuKSB7XG4gICAgY29uc3QgY29udGV4dHMgPSBbJ3NlbGVjdGlvbiddO1xuICAgIGNvbnN0IGZhdmljb25VcmwgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyBiYXNlNjRTdHJpbmc7XG4gICAgY29uc3QgcmVnZXhTdHJpbmcgPSBzZWFyY2hFbmdpbmUucmVnZXguYm9keTtcbiAgICBjb25zdCByZWdleE1vZGlmaWVyID0gc2VhcmNoRW5naW5lLnJlZ2V4LmZsYWdzO1xuICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleFN0cmluZywgcmVnZXhNb2RpZmllcik7XG4gICAgaWYgKCFzZWFyY2hFbmdpbmUuc2hvdykgcmV0dXJuO1xuICAgIC8vIGlmIChsb2dUb0NvbnNvbGUpe1xuICAgIC8vIFx0Y29uc29sZS5sb2cocmVnZXhTdHJpbmcpO1xuICAgIC8vIFx0Y29uc29sZS5sb2cocmVnZXhNb2RpZmllcik7XG4gICAgLy8gXHRjb25zb2xlLmxvZyhzZWxlY3Rpb24ubWF0Y2gocmVnZXgpKTtcbiAgICAvLyB9XG4gICAgaWYgKGNvbnRleHRzZWFyY2hfdXNlUmVnZXggJiYgc2VsZWN0aW9uLm1hdGNoKHJlZ2V4KSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgIGlmIChicm93c2VyVmVyc2lvbiA+PSA1NiAmJiBjb250ZXh0c2VhcmNoX2Rpc3BsYXlGYXZpY29ucyA9PT0gdHJ1ZSkge1xuICAgICAgICBicm93c2VyLmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgICAgICAgICAgaWQ6IGluZGV4LFxuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgY29udGV4dHM6IGNvbnRleHRzLFxuICAgICAgICAgICAgaWNvbnM6IHsgMjA6IGZhdmljb25VcmwgfSxcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYnJvd3Nlci5jb250ZXh0TWVudXMuY3JlYXRlKHtcbiAgICAgICAgICAgIGlkOiBpbmRleCxcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgIGNvbnRleHRzOiBjb250ZXh0cyxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLyBQZXJmb3JtIHNlYXJjaCBiYXNlZCBvbiBzZWxlY3RlZCBzZWFyY2ggZW5naW5lLCBpLmUuIHNlbGVjdGVkIGNvbnRleHQgbWVudSBpdGVtXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzU2VhcmNoKGluZm8sIHRhYikge1xuICAgIGxldCBpZCA9IGluZm8ubWVudUl0ZW1JZC5yZXBsYWNlKCdjcy0nLCAnJyk7XG4gICAgbGV0IHRhYkluZGV4LCB0YWJQb3NpdGlvbjtcblxuICAgIGlmIChpbmZvLnNlbGVjdGlvblRleHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBQcmVmZXIgaW5mby5zZWxlY3Rpb25UZXh0IG92ZXIgc2VsZWN0aW9uIHJlY2VpdmVkIGJ5IGNvbnRlbnQgc2NyaXB0IGZvciB0aGVzZSBsZW5ndGhzIChtb3JlIHJlbGlhYmxlKVxuICAgICAgICBpZiAoaW5mby5zZWxlY3Rpb25UZXh0Lmxlbmd0aCA8IDE1MCB8fCBpbmZvLnNlbGVjdGlvblRleHQubGVuZ3RoID4gMTUwKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBpbmZvLnNlbGVjdGlvblRleHQudHJpbSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgICBjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5TaWRlYmFyICYmXG4gICAgICAgIGlkICE9PSAncmV2ZXJzZS1pbWFnZS1zZWFyY2gnICYmXG4gICAgICAgIGlkICE9PSAnZ29vZ2xlLWxlbnMnXG4gICAgKSB7XG4gICAgICAgIGF3YWl0IGJyb3dzZXIuc2lkZWJhckFjdGlvbi5vcGVuKCk7XG4gICAgICAgIGF3YWl0IGJyb3dzZXIuc2lkZWJhckFjdGlvbi5zZXRQYW5lbCh7IHBhbmVsOiAnJyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBicm93c2VyLnNpZGViYXJBY3Rpb24uY2xvc2UoKTtcbiAgICAgICAgdGFiSW5kZXggPSB0YWIuaW5kZXggKyAxO1xuICAgIH1cbiAgICBjb25zdCB0YWJzID0gYXdhaXQgYnJvd3Nlci50YWJzLnF1ZXJ5KHsgY3VycmVudFdpbmRvdzogdHJ1ZSB9KTtcbiAgICB0YWJQb3NpdGlvbiA9IHRhYnNbdGFicy5sZW5ndGggLSAxXS5pbmRleCArIDE7XG4gICAgaWYgKGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJbkxhc3RUYWIpIHRhYkluZGV4ID0gdGFiUG9zaXRpb247XG4gICAgaWYgKGNvbnRleHRzZWFyY2hfbXVsdGlNb2RlICE9PSAnbXVsdGlBZnRlckxhc3RUYWInKSB7XG4gICAgICAgIHRhYlBvc2l0aW9uID0gdGFiSW5kZXggKyAxO1xuICAgIH1cbiAgICBpZiAoaWQgPT09ICdyZXZlcnNlLWltYWdlLXNlYXJjaCcpIHtcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2codGFyZ2V0VXJsKTtcbiAgICAgICAgZGlzcGxheVNlYXJjaFJlc3VsdHMoZ29vZ2xlUmV2ZXJzZUltYWdlU2VhcmNoVXJsICsgdGFyZ2V0VXJsLCB0YWJJbmRleCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGlkID09PSAnZ29vZ2xlLWxlbnMnKSB7XG4gICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKHRhcmdldFVybCk7XG4gICAgICAgIGRpc3BsYXlTZWFyY2hSZXN1bHRzKGdvb2dsZUxlbnNVcmwgKyB0YXJnZXRVcmwsIHRhYkluZGV4KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaWQgPT09ICdzaXRlLXNlYXJjaCcgJiYgIWlzRW1wdHkodGFyZ2V0VXJsKSkge1xuICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyh0YXJnZXRVcmwpO1xuICAgICAgICBpZiAoY29udGV4dHNlYXJjaF9vcGVuU2VhcmNoUmVzdWx0c0luU2lkZWJhcikge1xuICAgICAgICAgICAgY29uc3QgZG9tYWluID0gZ2V0RG9tYWluKHRhYi51cmwpLnJlcGxhY2UoL2h0dHBzPzpcXC9cXC8vLCAnJyk7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gYXdhaXQgZ2V0T3B0aW9ucygpO1xuICAgICAgICAgICAgdGFyZ2V0VXJsID1cbiAgICAgICAgICAgICAgICBvcHRpb25zLnNpdGVTZWFyY2hVcmwgK1xuICAgICAgICAgICAgICAgIGVuY29kZVVybChgc2l0ZTpodHRwczovLyR7ZG9tYWlufSAke3NlbGVjdGlvbn1gKTtcbiAgICAgICAgICAgIG9wZW5VcmwodGFyZ2V0VXJsKTtcbiAgICAgICAgICAgIGJyb3dzZXIuc2lkZWJhckFjdGlvbi5zZXRUaXRsZSh7IHRpdGxlOiAnU2VhcmNoIHJlc3VsdHMnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlzcGxheVNlYXJjaFJlc3VsdHModGFyZ2V0VXJsLCB0YWJJbmRleCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlkID09PSAnb3B0aW9ucycpIHtcbiAgICAgICAgYnJvd3Nlci5ydW50aW1lLm9wZW5PcHRpb25zUGFnZSgpLnRoZW4obnVsbCwgb25FcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGlkID09PSAnbXVsdGl0YWInKSB7XG4gICAgICAgIHByb2Nlc3NNdWx0aVRhYlNlYXJjaCh0YWJQb3NpdGlvbik7XG4gICAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGlkID09PSAnbWF0Y2gnKSB7XG4gICAgICAgIGdldE9wdGlvbnMoKS50aGVuKChzZXR0aW5ncykgPT4ge1xuICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBzZXR0aW5ncy5vcHRpb25zO1xuICAgICAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICBgUHJlZmVyZW5jZXMgcmV0cmlldmVkIGZyb20gc3luYyBzdG9yYWdlOiAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMpfWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5leGFjdE1hdGNoID0gIWNvbnRleHRzZWFyY2hfZXhhY3RNYXRjaDtcbiAgICAgICAgICAgIHNldEV4YWN0TWF0Y2gob3B0aW9ucyk7XG4gICAgICAgICAgICBzYXZlT3B0aW9ucyhvcHRpb25zLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgaW50SWQgPSBwYXJzZUludChpZCk7XG5cbiAgICAvLyBBdCB0aGlzIHBvaW50LCBpdCBzaG91bGQgYmUgYSBudW1iZXJcbiAgICBpZiAoIWlzTmFOKGludElkKSkge1xuICAgICAgICBzZWFyY2hVc2luZyhzZWFyY2hFbmdpbmVzQXJyYXlbaW50SWQgLSAxXSwgdGFiSW5kZXgpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc011bHRpVGFiU2VhcmNoKHRhYlBvc2l0aW9uKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5nZXQobnVsbCk7XG4gICAgc2VhcmNoRW5naW5lcyA9IHNvcnRCeUluZGV4KGRhdGEpO1xuICAgIGxldCBtdWx0aVRhYlNlYXJjaEVuZ2luZVVybHMgPSBbXTtcbiAgICBmb3IgKGxldCBpZCBpbiBzZWFyY2hFbmdpbmVzKSB7XG4gICAgICAgIGlmIChzZWFyY2hFbmdpbmVzW2lkXS5tdWx0aXRhYikge1xuICAgICAgICAgICAgbXVsdGlUYWJTZWFyY2hFbmdpbmVVcmxzLnB1c2goXG4gICAgICAgICAgICAgICAgZ2V0U2VhcmNoRW5naW5lVXJsKHNlYXJjaEVuZ2luZXNbaWRdLnVybCwgc2VsZWN0aW9uKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobm90aWZpY2F0aW9uc0VuYWJsZWQgJiYgaXNFbXB0eShtdWx0aVRhYlNlYXJjaEVuZ2luZVVybHMpKSB7XG4gICAgICAgIG5vdGlmeSgnU2VhcmNoIGVuZ2luZXMgaGF2ZSBub3QgYmVlbiBzZWxlY3RlZCBmb3IgYSBtdWx0aS1zZWFyY2guJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbiA9IG11bHRpVGFiU2VhcmNoRW5naW5lVXJscy5sZW5ndGg7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2cobXVsdGlUYWJTZWFyY2hFbmdpbmVVcmxzKTtcbiAgICBpZiAoY29udGV4dHNlYXJjaF9tdWx0aU1vZGUgPT09ICdtdWx0aU5ld1dpbmRvdycpIHtcbiAgICAgICAgYXdhaXQgYnJvd3Nlci53aW5kb3dzLmNyZWF0ZSh7XG4gICAgICAgICAgICB0aXRsZVByZWZhY2U6IHdpbmRvd1RpdGxlICsgXCInXCIgKyBzZWxlY3Rpb24gKyBcIidcIixcbiAgICAgICAgICAgIHVybDogbXVsdGlUYWJTZWFyY2hFbmdpbmVVcmxzLFxuICAgICAgICAgICAgaW5jb2duaXRvOiBjb250ZXh0c2VhcmNoX3ByaXZhdGVNb2RlLFxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgYXdhaXQgYnJvd3Nlci50YWJzLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgaW5kZXg6IHRhYlBvc2l0aW9uICsgaSxcbiAgICAgICAgICAgICAgICB1cmw6IG11bHRpVGFiU2VhcmNoRW5naW5lVXJsc1tpXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBIYW5kbGUgc2VhcmNoIHRlcm1zIGlmIHRoZXJlIGFyZSBhbnlcbmZ1bmN0aW9uIGdldFNlYXJjaEVuZ2luZVVybChzZWFyY2hFbmdpbmVVcmwsIHNlbCkge1xuICAgIGxldCBxdW90ZSA9ICcnO1xuICAgIGlmIChjb250ZXh0c2VhcmNoX2V4YWN0TWF0Y2gpIHF1b3RlID0gJyUyMic7XG4gICAgaWYgKHNlYXJjaEVuZ2luZVVybC5pbmNsdWRlcygne3NlYXJjaFRlcm1zfScpKSB7XG4gICAgICAgIHJldHVybiBzZWFyY2hFbmdpbmVVcmwucmVwbGFjZSgve3NlYXJjaFRlcm1zfS9nLCBlbmNvZGVVcmwoc2VsKSk7XG4gICAgfSBlbHNlIGlmIChzZWFyY2hFbmdpbmVVcmwuaW5jbHVkZXMoJyVzJykpIHtcbiAgICAgICAgcmV0dXJuIHNlYXJjaEVuZ2luZVVybC5yZXBsYWNlKC8lcy9nLCBlbmNvZGVVcmwoc2VsKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlYXJjaEVuZ2luZVVybCArIHF1b3RlICsgZW5jb2RlVXJsKHNlbCkgKyBxdW90ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNlYXJjaFVzaW5nKGlkLCB0YWJJbmRleCkge1xuICAgIGxldCBzZWFyY2hFbmdpbmVVcmwgPSBzZWFyY2hFbmdpbmVzW2lkXS51cmw7XG4gICAgdGFyZ2V0VXJsID0gZ2V0U2VhcmNoRW5naW5lVXJsKHNlYXJjaEVuZ2luZVVybCwgc2VsZWN0aW9uKTtcbiAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhgVGFyZ2V0IHVybDogJHt0YXJnZXRVcmx9YCk7XG4gICAgaWYgKGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJblNpZGViYXIpIHtcbiAgICAgICAgYnJvd3Nlci5zaWRlYmFyQWN0aW9uLnNldFBhbmVsKHsgcGFuZWw6IHRhcmdldFVybCB9KTtcbiAgICAgICAgb3BlblVybCh0YXJnZXRVcmwpO1xuICAgICAgICBicm93c2VyLnNpZGViYXJBY3Rpb24uc2V0VGl0bGUoeyB0aXRsZTogJ1NlYXJjaCByZXN1bHRzJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkaXNwbGF5U2VhcmNoUmVzdWx0cyh0YXJnZXRVcmwsIHRhYkluZGV4KTtcbn1cblxuLy8gRGlzcGxheSB0aGUgc2VhcmNoIHJlc3VsdHNcbmFzeW5jIGZ1bmN0aW9uIGRpc3BsYXlTZWFyY2hSZXN1bHRzKHRhcmdldFVybCwgdGFiUG9zaXRpb24pIHtcbiAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZygnVGFiIHBvc2l0aW9uOiAnICsgdGFiUG9zaXRpb24pO1xuICAgIGNvbnN0IHdpbmRvd0luZm8gPSBhd2FpdCBicm93c2VyLndpbmRvd3MuZ2V0Q3VycmVudCh7IHBvcHVsYXRlOiBmYWxzZSB9KTtcbiAgICBjb25zdCBjdXJyZW50V2luZG93SUQgPSB3aW5kb3dJbmZvLmlkO1xuICAgIGlmIChjb250ZXh0c2VhcmNoX29wZW5TZWFyY2hSZXN1bHRzSW5OZXdXaW5kb3cpIHtcbiAgICAgICAgYXdhaXQgYnJvd3Nlci53aW5kb3dzLmNyZWF0ZSh7XG4gICAgICAgICAgICB1cmw6IHRhcmdldFVybCxcbiAgICAgICAgICAgIGluY29nbml0bzogY29udGV4dHNlYXJjaF9wcml2YXRlTW9kZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghY29udGV4dHNlYXJjaF9tYWtlTmV3VGFiT3JXaW5kb3dBY3RpdmUpIHtcbiAgICAgICAgICAgIGF3YWl0IGJyb3dzZXIud2luZG93cy51cGRhdGUoY3VycmVudFdpbmRvd0lELCB7IGZvY3VzZWQ6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJbk5ld1RhYikge1xuICAgICAgICBicm93c2VyLnRhYnMuY3JlYXRlKHtcbiAgICAgICAgICAgIGFjdGl2ZTogY29udGV4dHNlYXJjaF9tYWtlTmV3VGFiT3JXaW5kb3dBY3RpdmUsXG4gICAgICAgICAgICBpbmRleDogdGFiUG9zaXRpb24sXG4gICAgICAgICAgICB1cmw6IHRhcmdldFVybCxcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3BlbiBzZWFyY2ggcmVzdWx0cyBpbiB0aGUgc2FtZSB0YWJcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgc2VhcmNoIHJlc3VsdHMgaW4gc2FtZSB0YWIsIHVybCBpcyAnICsgdGFyZ2V0VXJsKTtcbiAgICAgICAgfVxuICAgICAgICBicm93c2VyLnRhYnMudXBkYXRlKHsgdXJsOiB0YXJnZXRVcmwgfSk7XG4gICAgfVxufVxuXG4vLy8gT01OSUJPWFxuLy8gUHJvdmlkZSBoZWxwIHRleHQgdG8gdGhlIHVzZXJcbmJyb3dzZXIub21uaWJveC5zZXREZWZhdWx0U3VnZ2VzdGlvbih7XG4gICAgZGVzY3JpcHRpb246IG9tbmlib3hEZXNjcmlwdGlvbixcbn0pO1xuXG4vLyBVcGRhdGUgdGhlIHN1Z2dlc3Rpb25zIHdoZW5ldmVyIHRoZSBpbnB1dCBpcyBjaGFuZ2VkXG5icm93c2VyLm9tbmlib3gub25JbnB1dENoYW5nZWQuYWRkTGlzdGVuZXIoKGlucHV0LCBzdWdnZXN0KSA9PiB7XG4gICAgaWYgKGlucHV0LmluZGV4T2YoJyAnKSA+IDApIHtcbiAgICAgICAgbGV0IHN1Z2dlc3Rpb24gPSBidWlsZFN1Z2dlc3Rpb24oaW5wdXQpO1xuICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShzdWdnZXN0aW9uKSk7XG4gICAgICAgIGlmIChzdWdnZXN0aW9uLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgc3VnZ2VzdChzdWdnZXN0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4vLyBPcGVuIHRoZSBwYWdlIGJhc2VkIG9uIGhvdyB0aGUgdXNlciBjbGlja3Mgb24gYSBzdWdnZXN0aW9uXG5icm93c2VyLm9tbmlib3gub25JbnB1dEVudGVyZWQuYWRkTGlzdGVuZXIoYXN5bmMgKGlucHV0KSA9PiB7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coaW5wdXQpO1xuICAgIGxldCB0YWJJbmRleCwgdGFiUG9zaXRpb24sIHRhYklkO1xuXG4gICAgY29uc3QgYWN0aXZlVGFiID0gYXdhaXQgYnJvd3Nlci50YWJzLnF1ZXJ5KHtcbiAgICAgICAgY3VycmVudFdpbmRvdzogdHJ1ZSxcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgIH0pO1xuICAgIHRhYkluZGV4ID0gYWN0aXZlVGFiWzBdLmluZGV4O1xuICAgIHRhYklkID0gYWN0aXZlVGFiWzBdLmlkO1xuXG4gICAgY29uc3QgdGFicyA9IGF3YWl0IGJyb3dzZXIudGFicy5xdWVyeSh7IGN1cnJlbnRXaW5kb3c6IHRydWUgfSk7XG4gICAgaWYgKGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJbkxhc3RUYWIpIHtcbiAgICAgICAgdGFiSW5kZXggPSB0YWJzLmxlbmd0aCArIDE7XG4gICAgfVxuXG4gICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coY29udGV4dHNlYXJjaF9tdWx0aU1vZGUpO1xuICAgIGlmIChjb250ZXh0c2VhcmNoX211bHRpTW9kZSA9PT0gJ211bHRpQWZ0ZXJMYXN0VGFiJykge1xuICAgICAgICB0YWJQb3NpdGlvbiA9IHRhYnMubGVuZ3RoICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YWJQb3NpdGlvbiA9IHRhYkluZGV4ICsgMTtcbiAgICB9XG5cbiAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyh0YWJQb3NpdGlvbik7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coaW5wdXQuaW5kZXhPZignOi8vJykpO1xuXG4gICAgLy8gT25seSBkaXNwbGF5IHNlYXJjaCByZXN1bHRzIHdoZW4gdGhlcmUgaXMgYSB2YWxpZCBsaW5rIGluc2lkZSBvZiB0aGUgdXJsIHZhcmlhYmxlXG4gICAgaWYgKGlucHV0LmluZGV4T2YoJzovLycpID4gLTEpIHtcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2coJ1Byb2Nlc3Npbmcgc2VhcmNoLi4uJyk7XG4gICAgICAgIGRpc3BsYXlTZWFyY2hSZXN1bHRzKGlucHV0LCB0YWJJbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGtleXdvcmQgPSBpbnB1dC5zcGxpdCgnICcpWzBdO1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoVGVybXMgPSBpbnB1dC5yZXBsYWNlKGtleXdvcmQsICcnKS50cmltKCk7XG4gICAgICAgICAgICBjb25zdCBzdWdnZXN0aW9uID0gYnVpbGRTdWdnZXN0aW9uKGlucHV0KTtcbiAgICAgICAgICAgIHN3aXRjaCAoa2V5d29yZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJy4nOlxuICAgICAgICAgICAgICAgICAgICBicm93c2VyLnJ1bnRpbWUub3Blbk9wdGlvbnNQYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJyEnOlxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzTXVsdGlUYWJTZWFyY2godGFiUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib29rbWFya3MnOlxuICAgICAgICAgICAgICAgIGNhc2UgJyFiJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm1zID09PSAncmVjZW50Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9va21hcmtJdGVtcyA9IGF3YWl0IGJyb3dzZXIuYm9va21hcmtzLmdldFJlY2VudCgxMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib29rbWFya0l0ZW1zID0gYXdhaXQgYnJvd3Nlci5ib29rbWFya3Muc2VhcmNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoVGVybXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmxvZyhib29rbWFya0l0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBib29rbWFya0l0ZW1zOiBib29rbWFya0l0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGVybXM6IHNlYXJjaFRlcm1zLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYnJvd3Nlci50YWJzLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IGNvbnRleHRzZWFyY2hfbWFrZU5ld1RhYk9yV2luZG93QWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRhYlBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2Jvb2ttYXJrcy5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hpc3RvcnknOlxuICAgICAgICAgICAgICAgIGNhc2UgJyFoJzpcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeUl0ZW1zID0gYXdhaXQgYnJvd3Nlci5oaXN0b3J5LnNlYXJjaCh7IHRleHQ6IHNlYXJjaFRlcm1zIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuc2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnlJdGVtczogaGlzdG9yeUl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGVybXM6IHNlYXJjaFRlcm1zLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYnJvd3Nlci50YWJzLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IGNvbnRleHRzZWFyY2hfbWFrZU5ld1RhYk9yV2luZG93QWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRhYlBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2hpc3RvcnkuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoc3VnZ2VzdGlvbi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTZWFyY2hSZXN1bHRzKHN1Z2dlc3Rpb25bMF0uY29udGVudCwgdGFiSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlci5zZWFyY2guc2VhcmNoKHsgcXVlcnk6IHNlYXJjaFRlcm1zLCB0YWJJZDogdGFiSWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uc0VuYWJsZWQpIG5vdGlmeShub3RpZnlVc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gcHJvY2VzcyAnICsgaW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIGJ1aWxkU3VnZ2VzdGlvbih0ZXh0KSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGxldCBxdW90ZSA9ICcnO1xuXG4gICAgaWYgKGNvbnRleHRzZWFyY2hfZXhhY3RNYXRjaCkgcXVvdGUgPSAnJTIyJztcblxuICAgIC8vIE9ubHkgbWFrZSBzdWdnZXN0aW9ucyBhdmFpbGFibGUgYW5kIGNoZWNrIGZvciBleGlzdGVuY2Ugb2YgYSBzZWFyY2ggZW5naW5lIHdoZW4gdGhlcmUgaXMgYSBzcGFjZS5cbiAgICBpZiAodGV4dC5pbmRleE9mKCcgJykgPT09IC0xKSB7XG4gICAgICAgIGxhc3RBZGRyZXNzQmFyS2V5d29yZCA9ICcnO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGxldCBrZXl3b3JkID0gdGV4dC5zcGxpdCgnICcpWzBdO1xuICAgIGxldCBzZWFyY2hUZXJtcyA9IHRleHQucmVwbGFjZShrZXl3b3JkLCAnJykudHJpbSgpO1xuICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKHNlYXJjaFRlcm1zKTtcblxuICAgIC8vIERvbid0IG5vdGlmeSBmb3IgdGhlIHNhbWUga2V5d29yZFxuICAgIGxldCBzaG93Tm90aWZpY2F0aW9uID0gdHJ1ZTtcbiAgICBpZiAobGFzdEFkZHJlc3NCYXJLZXl3b3JkID09IGtleXdvcmQpIHNob3dOb3RpZmljYXRpb24gPSBmYWxzZTtcbiAgICBsYXN0QWRkcmVzc0JhcktleXdvcmQgPSBrZXl3b3JkO1xuXG4gICAgaWYgKGtleXdvcmQgPT09ICchJykge1xuICAgICAgICBzZWxlY3Rpb24gPSBzZWFyY2hUZXJtcztcbiAgICAgICAgbGV0IHN1Z2dlc3Rpb24gPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGVudDogJycsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdQZXJmb3JtIG11bHRpc2VhcmNoIGZvciAnICsgc2VhcmNoVGVybXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbjtcbiAgICB9IGVsc2UgaWYgKGtleXdvcmQgPT09ICcuJykge1xuICAgICAgICBsZXQgc3VnZ2VzdGlvbiA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ09wZW4gb3B0aW9ucyBwYWdlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBzdWdnZXN0aW9uO1xuICAgIH0gZWxzZSBpZiAoa2V5d29yZCA9PT0gJyFiJyB8fCBrZXl3b3JkID09PSAnYm9va21hcmtzJykge1xuICAgICAgICBsZXQgc3VnZ2VzdGlvbiA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1NlYXJjaCBib29rbWFya3MnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIHN1Z2dlc3Rpb247XG4gICAgfSBlbHNlIGlmIChrZXl3b3JkID09PSAnIWgnIHx8IGtleXdvcmQgPT09ICdoaXN0b3J5Jykge1xuICAgICAgICBsZXQgc3VnZ2VzdGlvbiA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1NlYXJjaCBoaXN0b3J5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBzdWdnZXN0aW9uO1xuICAgIH1cblxuICAgIGZvciAobGV0IGlkIGluIHNlYXJjaEVuZ2luZXMpIHtcbiAgICAgICAgaWYgKHNlYXJjaEVuZ2luZXNbaWRdLmtleXdvcmQgPT09IGtleXdvcmQpIHtcbiAgICAgICAgICAgIGxldCBzdWdnZXN0aW9uID0ge307XG4gICAgICAgICAgICBsZXQgc2VhcmNoRW5naW5lVXJsID0gc2VhcmNoRW5naW5lc1tpZF0udXJsO1xuICAgICAgICAgICAgaWYgKHNlYXJjaEVuZ2luZVVybC5pbmNsdWRlcygne3NlYXJjaFRlcm1zfScpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0VXJsID0gc2VhcmNoRW5naW5lVXJsLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgIC97c2VhcmNoVGVybXN9L2csXG4gICAgICAgICAgICAgICAgICAgIGVuY29kZVVybChzZWFyY2hUZXJtcylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hFbmdpbmVVcmwuaW5jbHVkZXMoJyVzJykpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRVcmwgPSBzZWFyY2hFbmdpbmVVcmwucmVwbGFjZSgvJXMvZywgZW5jb2RlVXJsKHNlYXJjaFRlcm1zKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldFVybCA9IHNlYXJjaEVuZ2luZVVybCArIHF1b3RlICsgZW5jb2RlVXJsKHNlYXJjaFRlcm1zKSArIHF1b3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3VnZ2VzdGlvblsnY29udGVudCddID0gdGFyZ2V0VXJsO1xuICAgICAgICAgICAgc3VnZ2VzdGlvblsnZGVzY3JpcHRpb24nXSA9XG4gICAgICAgICAgICAgICAgJ1NlYXJjaCAnICsgc2VhcmNoRW5naW5lc1tpZF0ubmFtZSArICcgZm9yICcgKyBzZWFyY2hUZXJtcztcbiAgICAgICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHN1Z2dlc3Rpb24pKTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHN1Z2dlc3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG5vIGtub3duIGtleXdvcmQgd2FzIGZvdW5kXG4gICAgaWYgKG5vdGlmaWNhdGlvbnNFbmFibGVkICYmIHNob3dOb3RpZmljYXRpb24pIHtcbiAgICAgICAgbm90aWZ5KG5vdGlmeVNlYXJjaEVuZ2luZVdpdGhLZXl3b3JkICsgJyAnICsga2V5d29yZCArICcgJyArIG5vdGlmeVVua25vd24pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vLyBIZWxwZXIgZnVuY3Rpb25zXG5cbi8vIFRlc3QgaWYgYSBzZWFyY2ggZW5naW5lIHBlcmZvcm1pbmcgYSBzZWFyY2ggZm9yIHRoZSBrZXl3b3JkICd0ZXN0JyByZXR1cm5zIHZhbGlkIHJlc3VsdHNcbmZ1bmN0aW9uIHRlc3RTZWFyY2hFbmdpbmUoZW5naW5lRGF0YSkge1xuICAgIGlmIChlbmdpbmVEYXRhLnVybCAhPSAnJykge1xuICAgICAgICBsZXQgdGVtcFRhcmdldFVybCA9IGdldFNlYXJjaEVuZ2luZVVybChlbmdpbmVEYXRhLnVybCwgJ3Rlc3QnKTtcbiAgICAgICAgYnJvd3Nlci50YWJzLmNyZWF0ZSh7XG4gICAgICAgICAgICB1cmw6IHRlbXBUYXJnZXRVcmwsXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAobm90aWZpY2F0aW9uc0VuYWJsZWQpIHtcbiAgICAgICAgbm90aWZ5KG5vdGlmeVNlYXJjaEVuZ2luZVVybFJlcXVpcmVkKTtcbiAgICB9XG59XG5cbi8vLyBHZW5lcmljIEVycm9yIEhhbmRsZXJcbmZ1bmN0aW9uIG9uRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAobG9nVG9Db25zb2xlKSBjb25zb2xlLmVycm9yKGAke2Vycm9yfWApO1xufVxuXG4vLy8gRW5jb2RlIGEgdXJsXG5mdW5jdGlvbiBlbmNvZGVVcmwodXJsKSB7XG4gICAgaWYgKGlzRW5jb2RlZCh1cmwpKSB7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodXJsKTtcbn1cblxuLy8vIFZlcmlmeSBpZiB1cmkgaXMgZW5jb2RlZFxuZnVuY3Rpb24gaXNFbmNvZGVkKHVyaSkge1xuICAgIGxldCB0ZXN0ID0gJyc7XG4gICAgdHJ5IHtcbiAgICAgICAgdGVzdCA9IHVyaSAhPT0gZGVjb2RlVVJJQ29tcG9uZW50KHVyaSk7XG4gICAgICAgIHJldHVybiB0ZXN0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuLy8vIFNlbmQgbWVzc2FnZVxuYXN5bmMgZnVuY3Rpb24gc2VuZE1lc3NhZ2VUb1RhYih0YWIsIG1lc3NhZ2UpIHtcbiAgICBjb25zdCB0YWJJZCA9IHRhYi5pZDtcbiAgICBhd2FpdCBicm93c2VyLnRhYnMuc2VuZE1lc3NhZ2UodGFiSWQsIG1lc3NhZ2UpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgaWYgKGxvZ1RvQ29uc29sZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEZhaWxlZCB0byBzZW5kIG1lc3NhZ2UgJHtKU09OLnN0cmluZ2lmeShtZXNzYWdlKX0gdG86XFxuYCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVGFiICR7dGFiLmlkfTogJHt0YWIudGl0bGV9XFxuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH0pO1xuICAgIGlmIChsb2dUb0NvbnNvbGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFN1Y2Nlc3NmdWxseSBzZW50IG1lc3NhZ2UgdG86XFxuYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBUYWIgJHt0YWIuaWR9OiAke3RhYi50aXRsZX1cXG5gKTtcbiAgICB9XG59XG5cbi8vLyBOb3RpZmljYXRpb25zXG5mdW5jdGlvbiBub3RpZnkobWVzc2FnZSkge1xuICAgIGJyb3dzZXIubm90aWZpY2F0aW9ucy5jcmVhdGUobWVzc2FnZS5zdWJzdHJpbmcoMCwgMjApLCB7XG4gICAgICAgIHR5cGU6ICdiYXNpYycsXG4gICAgICAgIGljb25Vcmw6ICdpY29ucy9pY29uXzY0LnBuZycsXG4gICAgICAgIHRpdGxlOiBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZSgnZXh0ZW5zaW9uTmFtZScpLFxuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXREb21haW4odXJsKSB7XG4gICAgbGV0IHByb3RvY29sID0gJyc7XG4gICAgaWYgKHVybC5pbmRleE9mKCc6Ly8nKSAhPT0gLTEpIHtcbiAgICAgICAgcHJvdG9jb2wgPSB1cmwuc3BsaXQoJzovLycpWzBdICsgJzovLyc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnkgZGVmYXVsdCwgc2V0IHRoZSBwcm90b2NvbCB0byAnaHR0cHM6Ly8nIGlmIGl0IGhhc24ndCBiZWVuIHNldFxuICAgICAgICBwcm90b2NvbCA9ICdodHRwczovLyc7XG4gICAgfVxuXG4gICAgbGV0IHVybFBhcnRzID0gdXJsXG4gICAgICAgIC5yZXBsYWNlKCdodHRwOi8vJywgJycpXG4gICAgICAgIC5yZXBsYWNlKCdodHRwczovLycsICcnKVxuICAgICAgICAuc3BsaXQoL1svPyNdLyk7XG4gICAgbGV0IGRvbWFpbiA9IHByb3RvY29sICsgdXJsUGFydHNbMF07XG4gICAgcmV0dXJuIGRvbWFpbjtcbn1cblxuLy8vIFNvcnQgc2VhcmNoIGVuZ2luZXMgYnkgaW5kZXhcbmZ1bmN0aW9uIHNvcnRCeUluZGV4KGxpc3QpIHtcbiAgICBsZXQgc29ydGVkTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobGlzdCkpO1xuICAgIGxldCBuID0gT2JqZWN0LmtleXMobGlzdCkubGVuZ3RoO1xuICAgIGxldCBhcnJheU9mSW5kZXhlcyA9IFtdO1xuICAgIGxldCBhcnJheU9mSWRzID0gW107XG4gICAgbGV0IG1pbiA9IDA7XG4gICAgaWYgKGxvZ1RvQ29uc29sZSkgY29uc29sZS5sb2cobGlzdCk7XG4gICAgLy8gQ3JlYXRlIHRoZSBhcnJheSBvZiBpbmRleGVzIGFuZCBpdHMgY29ycmVzcG9uZGluZyBhcnJheSBvZiBpZHNcbiAgICBmb3IgKGxldCBpZCBpbiBsaXN0KSB7XG4gICAgICAgIGlmIChsb2dUb0NvbnNvbGUpIGNvbnNvbGUubG9nKGBpZCA9ICR7aWR9YCk7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGluZGV4LCB0aGVuIG1vdmUgdGhlIHNlYXJjaCBlbmdpbmUgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdFxuICAgICAgICBpZiAoaXNFbXB0eShsaXN0W2lkXS5pbmRleCkpIHtcbiAgICAgICAgICAgIGxpc3RbaWRdLmluZGV4ID0gbiArIDE7XG4gICAgICAgICAgICBuKys7XG4gICAgICAgIH1cbiAgICAgICAgYXJyYXlPZkluZGV4ZXMucHVzaChsaXN0W2lkXS5pbmRleCk7XG4gICAgICAgIGFycmF5T2ZJZHMucHVzaChpZCk7XG4gICAgfVxuICAgIC8vIFNvcnQgdGhlIGxpc3QgYnkgaW5kZXhcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IG4gKyAxOyBpKyspIHtcbiAgICAgICAgbWluID0gTWF0aC5taW4oLi4uYXJyYXlPZkluZGV4ZXMpO1xuICAgICAgICBsZXQgaW5kID0gYXJyYXlPZkluZGV4ZXMuaW5kZXhPZihtaW4pO1xuICAgICAgICBhcnJheU9mSW5kZXhlcy5zcGxpY2UoaW5kLCAxKTtcbiAgICAgICAgbGV0IGlkID0gYXJyYXlPZklkcy5zcGxpY2UoaW5kLCAxKTtcbiAgICAgICAgc29ydGVkTGlzdFtpZF0uaW5kZXggPSBpO1xuICAgIH1cblxuICAgIHJldHVybiBzb3J0ZWRMaXN0O1xufVxuXG4vLyBUZXN0IGlmIGFuIG9iamVjdCBpcyBlbXB0eVxuZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHZhbHVlLnRyaW0oKS5sZW5ndGggPT09IDA7XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHJldHVybiB2YWx1ZS5sZW5ndGggPT09IDA7XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSByZXR1cm4gIXZhbHVlO1xufVxuXG5mdW5jdGlvbiBvcGVuVXJsKHVybCkge1xuICAgIGJyb3dzZXIuc2lkZWJhckFjdGlvbi5zZXRQYW5lbCh7IHBhbmVsOiB1cmwgfSk7XG59XG5cbi8vIFxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hDb25maWcoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChicm93c2VyLnJ1bnRpbWUuZ2V0VVJMKCdjb25maWcuanNvbicpKTtcbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIGNvbmZpZztcbn1cblxuaW5pdCgpO1xuIl0sIm5hbWVzIjpbIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRoaXN0b3J5SXRlbXMiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkYm9va21hcmtJdGVtcyIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRDT1JTX0FQSV9VUkwiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkQ09SU19BUElfS0VZIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHNlYXJjaEVuZ2luZXMiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkc2VhcmNoRW5naW5lc0FycmF5IiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHNlbGVjdGlvbiIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciR0YXJnZXRVcmwiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkbGFzdEFkZHJlc3NCYXJLZXl3b3JkIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGxvZ1RvQ29uc29sZSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRERUZBVUxUX1NFQVJDSF9FTkdJTkVTIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGdvb2dsZUxlbnNVcmwiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkZ29vZ2xlUmV2ZXJzZUltYWdlU2VhcmNoVXJsIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGJhc2U2NENvbnRleHRTZWFyY2hJY29uIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGRlZmF1bHRSZWdleCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciR0aXRsZU11bHRpcGxlU2VhcmNoRW5naW5lcyIsImJyb3dzZXIiLCJpMThuIiwiZ2V0TWVzc2FnZSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciR0aXRsZVNpdGVTZWFyY2giLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkdGl0bGVFeGFjdE1hdGNoIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHRpdGxlT3B0aW9ucyIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciR3aW5kb3dUaXRsZSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRvbW5pYm94RGVzY3JpcHRpb24iLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkbm90aWZ5U2VhcmNoRW5naW5lc0xvYWRlZCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRub3RpZnlTZWFyY2hFbmdpbmVBZGRlZCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRub3RpZnlVc2FnZSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRub3RpZnlTZWFyY2hFbmdpbmVXaXRoS2V5d29yZCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRub3RpZnlVbmtub3duIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJG5vdGlmeVNlYXJjaEVuZ2luZVVybFJlcXVpcmVkIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGNvbnRleHRzZWFyY2hfZXhhY3RNYXRjaCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRjb250ZXh0c2VhcmNoX29wdGlvbnNNZW51TG9jYXRpb24iLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkY29udGV4dHNlYXJjaF9vcGVuU2VhcmNoUmVzdWx0c0luTmV3VGFiIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJbkxhc3RUYWIiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkY29udGV4dHNlYXJjaF9tYWtlTmV3VGFiT3JXaW5kb3dBY3RpdmUiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkY29udGV4dHNlYXJjaF9vcGVuU2VhcmNoUmVzdWx0c0luTmV3V2luZG93IiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGNvbnRleHRzZWFyY2hfb3BlblNlYXJjaFJlc3VsdHNJblNpZGViYXIiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkY29udGV4dHNlYXJjaF9kaXNwbGF5RmF2aWNvbnMiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkY29udGV4dHNlYXJjaF9kaXNwbGF5RXhpZlN1bW1hcnkiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkY29udGV4dHNlYXJjaF9kaXNhYmxlQWx0Q2xpY2siLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkY29udGV4dHNlYXJjaF9mb3JjZUZhdmljb25zUmVsb2FkIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGNvbnRleHRzZWFyY2hfcmVzZXRQcmVmZXJlbmNlcyIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRjb250ZXh0c2VhcmNoX2ZvcmNlU2VhcmNoRW5naW5lc1JlbG9hZCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRjb250ZXh0c2VhcmNoX3NpdGVTZWFyY2giLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkY29udGV4dHNlYXJjaF9zaXRlU2VhcmNoVXJsIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGNvbnRleHRzZWFyY2hfdXNlUmVnZXgiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkY29udGV4dHNlYXJjaF9tdWx0aU1vZGUiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkY29udGV4dHNlYXJjaF9wcml2YXRlTW9kZSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRub3RpZmljYXRpb25zRW5hYmxlZCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRkZWZhdWx0T3B0aW9ucyIsImV4YWN0TWF0Y2giLCJ0YWJNb2RlIiwidGFiQWN0aXZlIiwibGFzdFRhYiIsIm9wdGlvbnNNZW51TG9jYXRpb24iLCJkaXNwbGF5RmF2aWNvbnMiLCJkaXNwbGF5RXhpZlN1bW1hcnkiLCJkaXNhYmxlQWx0Q2xpY2siLCJmb3JjZVNlYXJjaEVuZ2luZXNSZWxvYWQiLCJyZXNldFByZWZlcmVuY2VzIiwiZm9yY2VGYXZpY29uc1JlbG9hZCIsInNpdGVTZWFyY2giLCJzaXRlU2VhcmNoVXJsIiwidXNlUmVnZXgiLCJtdWx0aU1vZGUiLCJwcml2YXRlTW9kZSIsImFzeW5jIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGluaXRpYWxpc2VPcHRpb25zQW5kU2VhcmNoRW5naW5lcyIsImZvcmNlUmVsb2FkIiwib3B0aW9ucyIsImRhdGEiLCJzdG9yYWdlIiwic3luYyIsImdldCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibG9nIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGlzRW1wdHkiLCJjbGVhciIsInNhdmUiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkc2V0RXhhY3RNYXRjaCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRzZXRUYWJNb2RlIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHNldE9wdGlvbnNNZW51TG9jYXRpb24iLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkc2V0RGlzcGxheUZhdmljb25zIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHNldERpc3BsYXlFeGlmU3VtbWFyeSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRzZXREaXNhYmxlQWx0Q2xpY2siLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkc2V0UmVzZXRPcHRpb25zIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHNldFNpdGVTZWFyY2hTZXR0aW5nIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHNldFVzZVJlZ2V4IiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHNldE11bHRpTW9kZSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRzYXZlT3B0aW9ucyIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRzZXRPcHRpb25zIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRzb3J0QnlJbmRleCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRzZXRSZWdleCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRzZXRLZXlib2FyZFNob3J0Y3V0cyIsImxvY2FsIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGdldEZhdmljb25zQXNCYXNlNjRTdHJpbmdzIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHNhdmVTZWFyY2hFbmdpbmVzVG9Mb2NhbFN0b3JhZ2UiLCJzZSIsInVuZGVmaW5lZCIsImpzb25GaWxlIiwicmVxSGVhZGVyIiwiSGVhZGVycyIsImFwcGVuZCIsInVzZXJSZXF1ZXN0IiwiUmVxdWVzdCIsIm1ldGhvZCIsImhlYWRlcnMiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJtZXNzYWdlIiwic3RhdHVzIiwiRXJyb3IiLCJqc29uIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHJlYnVpbGRDb250ZXh0TWVudSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRsb2FkRGVmYXVsdFNlYXJjaEVuZ2luZXMiLCJpZCIsInJlZ2V4Iiwic291cmNlIiwiZmxhZ3MiLCJrZXlib2FyZFNob3J0Y3V0IiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGdldE9wdGlvbnMiLCJibG5SZWJ1aWxkQ29udGV4dE1lbnUiLCJzdHJPcHRpb25zIiwiSlNPTiIsInN0cmluZ2lmeSIsInNldCIsImJsbk5vdGlmeSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRub3RpZnkiLCJhcnJheU9mUHJvbWlzZXMiLCJiYXNlNjQiLCJzZVVybCIsInVybCIsImRvbWFpbiIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRnZXREb21haW4iLCJwdXNoIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGdldE5ld0Zhdmljb24iLCJ2YWx1ZXMiLCJQcm9taXNlIiwiYWxsIiwidmFsdWUiLCJ0ZXN0cyIsImxpbmtzV2l0aEljb25zIiwicGFyc2VyIiwiRE9NUGFyc2VyIiwiYmVzdEljb25VcmwiLCJ3ZWJQYWdlIiwidGV4dCIsImxpbmtzIiwicGFyc2VGcm9tU3RyaW5nIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsaW5rIiwicmVsIiwiZ2V0QXR0cmlidXRlIiwidGVzdCIsImFic1VybCIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRjb252ZXJ0VXJsMkFic1VybCIsImhyZWYiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkZ2V0QmVzdEljb25VcmwiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkZ2V0QmFzZTY0SW1hZ2UiLCJ1cmxQYXJ0cyIsImluY2x1ZGVzIiwiaSIsImxhc3RJbmRleE9mIiwic3Vic3RyIiwic3BsaXQiLCJzaGlmdCIsInVybFBhcnQiLCJ1cmxzIiwicmVnZXhwIiwiUmVnRXhwIiwiYjY0IiwicnVudGltZSIsImdldEJyb3dzZXJJbmZvIiwidGhlbiIsImluZm8iLCJ2IiwidmVyc2lvbiIsImJyb3dzZXJWZXJzaW9uIiwicGFyc2VJbnQiLCJzbGljZSIsInNlYXJjaCIsImNvbnRleHRNZW51cyIsInJlbW92ZUFsbCIsIm9uQ2xpY2tlZCIsInJlbW92ZUxpc3RlbmVyIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHByb2Nlc3NTZWFyY2giLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkcmVidWlsZENvbnRleHRPcHRpb25zTWVudSIsImNyZWF0ZSIsInRpdGxlIiwiY29udGV4dHMiLCJuIiwiaW5kZXgiLCJiYXNlNjRTdHJpbmciLCJzdHJJbmRleCIsInRvU3RyaW5nIiwic3RyVGl0bGUiLCJuYW1lIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGJ1aWxkQ29udGV4dE1lbnVJdGVtIiwiYWRkTGlzdGVuZXIiLCJ0eXBlIiwiY2hlY2tlZCIsInNlYXJjaEVuZ2luZSIsImZhdmljb25VcmwiLCJyZWdleFN0cmluZyIsImJvZHkiLCJyZWdleE1vZGlmaWVyIiwic2hvdyIsIm1hdGNoIiwiaWNvbnMiLCJ0YWIiLCJ0YWJJbmRleCIsInRhYlBvc2l0aW9uIiwibWVudUl0ZW1JZCIsInJlcGxhY2UiLCJzZWxlY3Rpb25UZXh0IiwidHJpbSIsInNpZGViYXJBY3Rpb24iLCJvcGVuIiwic2V0UGFuZWwiLCJwYW5lbCIsImNsb3NlIiwidGFicyIsInF1ZXJ5IiwiY3VycmVudFdpbmRvdyIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRkaXNwbGF5U2VhcmNoUmVzdWx0cyIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRlbmNvZGVVcmwiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkb3BlblVybCIsInNldFRpdGxlIiwib3Blbk9wdGlvbnNQYWdlIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJG9uRXJyb3IiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkcHJvY2Vzc011bHRpVGFiU2VhcmNoIiwic2V0dGluZ3MiLCJpbnRJZCIsImlzTmFOIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHNlYXJjaFVzaW5nIiwibXVsdGlUYWJTZWFyY2hFbmdpbmVVcmxzIiwibXVsdGl0YWIiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkZ2V0U2VhcmNoRW5naW5lVXJsIiwid2luZG93cyIsInRpdGxlUHJlZmFjZSIsImluY29nbml0byIsInNlYXJjaEVuZ2luZVVybCIsInNlbCIsInF1b3RlIiwidGFyZ2V0VXJsIiwiY3VycmVudFdpbmRvd0lEIiwiZ2V0Q3VycmVudCIsInBvcHVsYXRlIiwidXBkYXRlIiwiZm9jdXNlZCIsImFjdGl2ZSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRidWlsZFN1Z2dlc3Rpb24iLCJyZXN1bHQiLCJpbmRleE9mIiwia2V5d29yZCIsInNlYXJjaFRlcm1zIiwic2hvd05vdGlmaWNhdGlvbiIsImNvbnRlbnQiLCJkZXNjcmlwdGlvbiIsInN1Z2dlc3Rpb24iLCJ1cmkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJlIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJGlzRW5jb2RlZCIsImVuY29kZVVSSUNvbXBvbmVudCIsIm5vdGlmaWNhdGlvbnMiLCJzdWJzdHJpbmciLCJpY29uVXJsIiwicHJvdG9jb2wiLCJsaXN0Iiwic29ydGVkTGlzdCIsInBhcnNlIiwiYXJyYXlPZkluZGV4ZXMiLCJhcnJheU9mSWRzIiwibWluIiwiTWF0aCIsImluZCIsInNwbGljZSIsIkFycmF5IiwiaXNBcnJheSIsInBhZ2VBY3Rpb24iLCJ0YWJJZCIsInNlbmRNZXNzYWdlIiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHNlbmRNZXNzYWdlVG9UYWIiLCJhY3Rpb24iLCJ3ZWJSZXF1ZXN0Iiwib25CZWZvcmVTZW5kSGVhZGVycyIsInJlcXVlc3RIZWFkZXJzIiwiaGVhZGVyIiwidG9Mb3dlckNhc2UiLCJ0eXBlcyIsIm9uTWVzc2FnZSIsInNlbmRlciIsImFjdGl2ZVRhYiIsImFjdGl2ZVRhYkluZGV4IiwiJDFiYWQwYWY5NGU2MGE1OTYkdmFyJHJlc2V0IiwiZW5naW5lRGF0YSIsInRlbXBUYXJnZXRVcmwiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkdGVzdFNlYXJjaEVuZ2luZSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRhZGROZXdTZWFyY2hFbmdpbmUiLCJyZXNldE9wdGlvbnMiLCJkb3dubG9hZHMiLCJkb3dubG9hZCIsInNhdmVBcyIsImZpbGVuYW1lIiwiaGlkZSIsIm9tbmlib3giLCJzZXREZWZhdWx0U3VnZ2VzdGlvbiIsIm9uSW5wdXRDaGFuZ2VkIiwiaW5wdXQiLCJzdWdnZXN0Iiwib25JbnB1dEVudGVyZWQiLCJib29rbWFya3MiLCJnZXRSZWNlbnQiLCJib29rbWFya0l0ZW1zIiwiaGlzdG9yeSIsImhpc3RvcnlJdGVtcyIsImJ5dGVzVXNlZCIsImdldEJ5dGVzSW5Vc2UiLCJpdGVtcyIsIm5hdmlnYXRvciIsInBlcm1pc3Npb25zIiwic3RhdGUiLCJjb25maWciLCJnZXRVUkwiLCIkMWJhZDBhZjk0ZTYwYTU5NiR2YXIkZmV0Y2hDb25maWciLCJBUElfVVJMIiwiQVBJX0tFWSIsIiQxYmFkMGFmOTRlNjBhNTk2JHZhciRpbml0Il0sInZlcnNpb24iOjMsImZpbGUiOiJiYWNrZ3JvdW5kLkhBU0hfUkVGX2MwZmYzOWM2MWViMDgwOGIuanMubWFwIn0=
